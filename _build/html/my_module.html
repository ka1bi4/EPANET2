

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>[BACKDROP] &mdash; EPANET 2.00.12 documentation</title>
  

  
  
  
  

  

  
  
    

  

  <link rel="stylesheet" href="_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" /> 

  
  <script src="_static/js/modernizr.min.js"></script>

</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">

    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search">
          

          
            <a href="index.html" class="icon icon-home"> EPANET
          

          
          </a>

          
            
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <ul>
<li class="toctree-l1"><a class="reference internal" href="0_about_manual.html">About This Manual</a></li>
<li class="toctree-l1"><a class="reference internal" href="1_introduction.html">1. INTRODUCTION</a></li>
<li class="toctree-l1"><a class="reference internal" href="2_quickstart.html">2. QUICK START TUTORIAL</a></li>
<li class="toctree-l1"><a class="reference internal" href="3_network_model.html">3. THE NETWORK MODEL</a></li>
<li class="toctree-l1"><a class="reference internal" href="4_EPANET_workspace.html">4. EPANET’S WORKSPACE</a></li>
<li class="toctree-l1"><a class="reference internal" href="5_projects.html">5. WORKING WITH PROJECTS</a></li>
<li class="toctree-l1"><a class="reference internal" href="6_objects.html">6. WORKING WITH OBJECTS</a></li>
<li class="toctree-l1"><a class="reference internal" href="7_map.html">7. WORKING WITH THE MAP</a></li>
<li class="toctree-l1"><a class="reference internal" href="8_analyzing_network.html">8. ANALYZING A NETWORK</a></li>
<li class="toctree-l1"><a class="reference internal" href="9_viewing_results.html">9. VIEWING RESULTS</a></li>
<li class="toctree-l1"><a class="reference internal" href="10_printing_copying.html">10. PRINTING AND COPYING</a></li>
<li class="toctree-l1"><a class="reference internal" href="11_importing_exporting.html">11. IMPORTING AND EXPORTING</a></li>
<li class="toctree-l1"><a class="reference internal" href="12_questions.html">12. FREQUENTLY ASKED QUESTIONS</a></li>
<li class="toctree-l1"><a class="reference internal" href="A_units.html">A. UNITS OF MEASUREMENT</a></li>
<li class="toctree-l1"><a class="reference internal" href="B_error_messages.html">B. ERROR MESSAGES</a></li>
<li class="toctree-l1"><a class="reference internal" href="C_command_line_EPANET.html">C. COMMAND LINE EPANET</a></li>
<li class="toctree-l1"><a class="reference internal" href="D_analysis_algorithms.html">D. ANALYSIS ALGORITHMS</a></li>
<li class="toctree-l1"><a class="reference internal" href="E_references.html">E. REFERENCES</a></li>
<li class="toctree-l1"><a class="reference internal" href="F_en2_section_keywords.html">F. INPUT SECTION KEYWORDS</a></li>
</ul>

            
          
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="index.html">EPANET</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content">
        
          















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="index.html">Docs</a> &raquo;</li>
        
      <li>[BACKDROP]</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
            
            <a href="_sources/my_module.rst.txt" rel="nofollow"> View page source</a>
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="backdrop">
<h1>[BACKDROP]<a class="headerlink" href="#backdrop" title="Permalink to this headline">¶</a></h1>
<blockquote>
<div><p><strong>Purpose:</strong></p>
<p>Identifies a backdrop image and dimensions for the network map.</p>
<p><strong>Formats:</strong></p>
<p><strong>DIMENSIONS</strong> <em>LLx LLy URx URy</em></p>
<p><strong>UNITS FEET/METERS/DEGREES/NONE</strong></p>
<p><strong>FILE</strong> <em>filename</em></p>
<p><strong>OFFSET</strong> <em>X Y</em></p>
<p><strong>Definitions:</strong></p>
<p><strong>DIMENSIONS</strong> provides the X and Y coordinates of the lower-left and
upper-right corners of the map’s bounding rectangle. Defaults are the
extents of the nodal coordinates supplied in the [COORDINATES]
section.</p>
<p><strong>UNITS</strong> specifies the units that the map’s dimensions are given in.
Default is NONE.</p>
<p><strong>FILE</strong> is the name of the file that contains the backdrop image.</p>
<p><strong>OFFSET</strong> lists the X and Y distance that the upper-left corner of
the backdrop image is offset from the upper-left corner of the map’s
bounding rectangle. Default is zero offset.</p>
<p><strong>Remarks:</strong></p>
</div></blockquote>
<ol class="loweralpha simple">
<li>The [BACKDROP] section is optional and is not used at all when EPANET
is run as a console application.</li>
<li>Only Windows Enhanced Metafiles and bitmap files can be used as
backdrops.</li>
</ol>
</div>
<div class="section" id="controls">
<h1>[CONTROLS]<a class="headerlink" href="#controls" title="Permalink to this headline">¶</a></h1>
<blockquote>
<div><p><strong>Purpose:</strong></p>
<p>Defines simple controls that modify links based on a single
condition.</p>
<p><strong>Format:</strong></p>
<p>One line for each control which can be of the form:</p>
<p><strong>LINK</strong> linkID status <strong>IF NODE</strong> nodeID <strong>ABOVE/BELOW</strong> value</p>
<p><strong>LINK</strong> linkID status <strong>AT TIME</strong> time</p>
<p><strong>LINK</strong> linkID status <strong>AT CLOCKTIME</strong> clocktime <strong>AM/PM</strong></p>
<p>where:</p>
</div></blockquote>
<table border="1" class="docutils">
<colgroup>
<col width="33%" />
<col width="33%" />
<col width="33%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">linkID</th>
<th class="head">=</th>
<th class="head">a link ID label</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td>status</td>
<td>=</td>
<td>OPEN or CLOSED, a
pump speed
setting, or a
control</td>
</tr>
<tr class="row-odd"><td>&#160;</td>
<td>&#160;</td>
<td>valve setting</td>
</tr>
<tr class="row-even"><td>nodeID</td>
<td>=</td>
<td>a node ID label</td>
</tr>
<tr class="row-odd"><td>value</td>
<td>=</td>
<td>a pressure for a
junction or a
water level for a
tank</td>
</tr>
<tr class="row-even"><td>time</td>
<td>=</td>
<td>a time since the
start of the
simulation in
decimal hours or
in hours:minutes
format</td>
</tr>
<tr class="row-odd"><td>clocktime</td>
<td>=</td>
<td>a 24-hour clock
time
(hours:minutes)</td>
</tr>
</tbody>
</table>
<blockquote>
<div><strong>Remarks:</strong></div></blockquote>
<ol class="loweralpha simple">
<li>Simple controls are used to change link status or settings based on
tank water level, junction pressure, time into the simulation or time
of day.</li>
<li>See the notes for the [STATUS] section for conventions used in
specifying link status and setting, particularly for control valves.</li>
</ol>
<blockquote>
<div><p><strong>Examples:</strong></p>
<p>[CONTROLS]</p>
<p>;Close Link 12 if the level in Tank 23 exceeds 20 ft. LINK 12 CLOSED
IF NODE 23 ABOVE 20</p>
<p>;Open Link 12 if pressure at Node 130 is under 30 psi LINK 12 OPEN IF
NODE 130 BELOW 30</p>
<p>;Pump PUMP02’s speed is set to 1.5 at 16 hours into</p>
<p>;the simulation</p>
<p>LINK PUMP02 1.5 AT TIME 16</p>
<p>;Link 12 is closed at 10 am and opened at 8 pm</p>
<p>;throughout the simulation</p>
<p>LINK 12 CLOSED AT CLOCKTIME 10 AM LINK 12 OPEN AT CLOCKTIME 8 PM</p>
</div></blockquote>
</div>
<div class="section" id="coordinates">
<h1>[COORDINATES]<a class="headerlink" href="#coordinates" title="Permalink to this headline">¶</a></h1>
<blockquote>
<div><p><strong>Purpose:</strong></p>
<p>Assigns map coordinates to network nodes.</p>
<p><strong>Format:</strong></p>
<p>One line for each node containing:</p>
</div></blockquote>
<ul class="simple">
<li>Node ID label</li>
<li>X-coordinate</li>
<li>Y-coordinate</li>
</ul>
<blockquote>
<div><strong>Remarks:</strong></div></blockquote>
<ol class="loweralpha simple">
<li>Include one line for each node displayed on the map.</li>
<li>The coordinates represent the distance from the node to an arbitrary
origin at the lower left of the map. Any convenient units of measure
for this distance can be used.</li>
<li>There is no requirement that all nodes be included in the map, and
their locations need not be to actual scale.</li>
<li>A [COORDINATES] section is optional and is not used at all when
EPANET is run as a console application.</li>
</ol>
<blockquote>
<div><p><strong>Example:</strong></p>
<p>[COORDINATES]</p>
<p>;Node X-Coord. Y-Coord</p>
<p>;——————————-</p>
</div></blockquote>
<table border="1" class="docutils">
<colgroup>
<col width="33%" />
<col width="39%" />
<col width="28%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">1</th>
<th class="head">10023</th>
<th class="head">128</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td>2</td>
<td>10056</td>
<td>95</td>
</tr>
</tbody>
</table>
</div>
<div class="section" id="curves">
<h1>[CURVES]<a class="headerlink" href="#curves" title="Permalink to this headline">¶</a></h1>
<blockquote>
<div><p><strong>Purpose:</strong></p>
<p>Defines data curves and their X,Y points.</p>
<p><strong>Format:</strong></p>
<p>One line for each X,Y point on each curve containing:</p>
</div></blockquote>
<ul class="simple">
<li>Curve ID label</li>
<li>X value</li>
<li>Y value</li>
</ul>
<blockquote>
<div><strong>Remarks:</strong></div></blockquote>
<ol class="loweralpha simple">
<li>Curves can be used to represent the following relations:<ul>
<li>Head v. Flow for pumps</li>
<li>Efficiency v. Flow for pumps</li>
<li>Volume v. Depth for tanks</li>
<li>Headloss v. Flow for General Purpose Valves</li>
</ul>
</li>
<li>The points of a curve must be entered in order of increasing X-values
(lower to higher).</li>
<li>If the input file will be used with the Windows version of EPANET,
then adding a comment which contains the curve type and description,
separated by a colon, directly above the first entry for a curve will
ensure that these items appear correctly in EPANET’s Curve Editor.
Curve types include PUMP, EFFICIENCY, VOLUME, and HEADLOSS. See the
examples below.</li>
</ol>
<blockquote>
<div><p><strong>Example:</strong></p>
<p>[CURVES]</p>
<p>;ID Flow Head</p>
<p>;PUMP: Curve for Pump 1 C1 0 200</p>
<p>C1 1000 100</p>
<p>C1 3000 0</p>
<p>;ID Flow Effic.</p>
<p>;EFFICIENCY:</p>
<p>E1 200 50</p>
<p>E1 1000 85</p>
<p>E1 2000 75</p>
<p>E1 3000 65</p>
</div></blockquote>
</div>
<div class="section" id="demands">
<h1>[DEMANDS]<a class="headerlink" href="#demands" title="Permalink to this headline">¶</a></h1>
<blockquote>
<div><p><strong>Purpose:</strong></p>
<p>Supplement to [JUNCTIONS] section for defining multiple water demands
at junction nodes.</p>
<p><strong>Format:</strong></p>
<p>One line for each category of demand at a junction containing:</p>
</div></blockquote>
<ul class="simple">
<li>Junction ID label</li>
<li>Base demand (flow units)</li>
<li>Demand pattern ID (optional)</li>
<li>Name of demand category preceded by a semicolon (optional)</li>
</ul>
<blockquote>
<div><strong>Remarks:</strong></div></blockquote>
<ol class="loweralpha simple">
<li>Only use for junctions whose demands need to be changed or
supplemented from entries in [JUNCTIONS] section.</li>
<li>Data in this section replaces any demand entered in [JUNCTIONS]
section for the same junction.</li>
<li>Unlimited number of demand categories can be entered per junction.</li>
</ol>
<ol class="loweralpha simple">
<li>If no demand pattern is supplied then the junction demand follows the
Default Demand Pattern specified in the [OPTIONS] section or Pattern
1 if no default pattern is specified. If the default pattern (or
Pattern 1) does not exist, then the demand remains constant.</li>
</ol>
<blockquote>
<div><p><strong>Example:</strong></p>
<p>[DEMANDS]</p>
<p>;ID Demand Pattern Category</p>
<p>;———————————</p>
</div></blockquote>
<table border="1" class="docutils">
<colgroup>
<col width="25%" />
<col width="22%" />
<col width="14%" />
<col width="39%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">J1</th>
<th class="head">100</th>
<th class="head">101</th>
<th class="head">;Domestic</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td>J1</td>
<td>25</td>
<td>102</td>
<td>;School</td>
</tr>
<tr class="row-odd"><td>J256</td>
<td>50</td>
<td>101</td>
<td>;Domestic</td>
</tr>
</tbody>
</table>
</div>
<div class="section" id="emitters">
<h1>[EMITTERS]<a class="headerlink" href="#emitters" title="Permalink to this headline">¶</a></h1>
<blockquote>
<div><p><strong>Purpose:</strong></p>
<p>Defines junctions modeled as emitters (sprinklers or orifices).</p>
<p><strong>Format:</strong></p>
<p>One line for each emitter containing:</p>
</div></blockquote>
<ul class="simple">
<li>Junction ID label</li>
<li>Flow coefficient, flow units at 1 psi (1 meter) pressure drop</li>
</ul>
<blockquote>
<div><strong>Remarks:</strong></div></blockquote>
<ol class="loweralpha simple">
<li>Emitters are used to model flow through sprinkler heads or pipe
leaks.</li>
<li>Flow out of the emitter equals the product of the flow coefficient
and the junction pressure raised to a power.</li>
<li>The power can be specified using the EMITTER EXPONENT option in the
[OPTIONS] section. The default power is 0.5, which normally applies
to sprinklers and nozzles.</li>
<li>Actual demand reported in the program’s results includes both the
normal demand at the junction plus flow through the emitter.</li>
<li>An [EMITTERS] section is optional.</li>
</ol>
</div>
<div class="section" id="energy">
<h1>[ENERGY]<a class="headerlink" href="#energy" title="Permalink to this headline">¶</a></h1>
<blockquote>
<div><p><strong>Purpose:</strong></p>
<p>Defines parameters used to compute pumping energy and cost.</p>
<p><strong>Formats:</strong></p>
<p><strong>GLOBAL PRICE/PATTERN/EFFIC</strong> <em>value</em> <strong>PUMP</strong> <em>PumpID</em>
<strong>PRICE/PATTERN/EFFIC</strong> <em>value</em> <strong>DEMAND CHARGE</strong> <em>value</em></p>
<p><strong>Remarks:</strong></p>
</div></blockquote>
<ol class="loweralpha simple" start="3">
<li>Lines beginning with the keyword <strong>GLOBAL</strong> are used to set global
default values of energy price, price pattern, and pumping efficiency
for all pumps.</li>
<li>Lines beginning with the keyword <strong>PUMP</strong> are used to override global
defaults for specific pumps.</li>
<li>Parameters are defined as follows:<ul>
<li><strong>PRICE</strong> = average cost per kW-hour,</li>
<li><strong>PATTERN</strong> = ID label of time pattern describing how energy price
varies with time,</li>
<li><strong>EFFIC</strong> = either a single percent efficiency for global setting
or the ID label of an efficiency curve for a specific pump,</li>
<li><strong>DEMAND CHARGE</strong> = added cost per maximum kW usage during the
simulation period.</li>
</ul>
</li>
<li>The default global pump efficiency is 75% and the default global
energy price is 0.</li>
<li>All entries in this section are optional. Items offset by slashes (/)
indicate allowable choices.</li>
</ol>
<blockquote>
<div><p><strong>Example:</strong></p>
<p>[ENERGY]</p>
<p>GLOBAL PRICE 0.05 ;Sets global energy price GLOBAL PATTERN PAT1 ;and
time-of-day pattern PUMP 23 PRICE 0.10 ;Overrides price for Pump 23</p>
<p>PUMP 23 EFFIC E23 ;Assigns effic. curve to Pump 23</p>
</div></blockquote>
</div>
<div class="section" id="junctions">
<h1>[JUNCTIONS]<a class="headerlink" href="#junctions" title="Permalink to this headline">¶</a></h1>
<blockquote>
<div><p><strong>Purpose:</strong></p>
<p>Defines junction nodes contained in the network.</p>
<p><strong>Format:</strong></p>
<p>One line for each junction containing:</p>
</div></blockquote>
<ul class="simple">
<li>ID label</li>
<li>Elevation, ft (m)</li>
<li>Base demand flow (flow units) (optional)</li>
<li>Demand pattern ID (optional)</li>
</ul>
<blockquote>
<div><strong>Remarks:</strong></div></blockquote>
<ol class="loweralpha simple" start="2">
<li>A [JUNCTIONS] section with at least one junction is required.</li>
<li>If no demand pattern is supplied then the junction demand follows the
Default Demand Pattern specified in the [OPTIONS] section or Pattern
1 if no default pattern is specified. If the default pattern (or
Pattern 1) does not exist, then the demand remains constant.</li>
<li>Demands can also be entered in the [DEMANDS] section and include
multiple demand categories per junction.</li>
</ol>
<blockquote>
<div><p><strong>Example:</strong></p>
<p>[JUNCTIONS]</p>
<p>;ID Elev. Demand Pattern</p>
<p>;——————————</p>
</div></blockquote>
<table border="1" class="docutils">
<colgroup>
<col width="11%" />
<col width="13%" />
<col width="11%" />
<col width="14%" />
<col width="52%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">J1</th>
<th class="head">100</th>
<th class="head">50</th>
<th class="head">Pat1</th>
<th class="head">&#160;</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td>J2</td>
<td>120</td>
<td>10</td>
<td>&#160;</td>
<td>;Uses default demand pattern</td>
</tr>
<tr class="row-odd"><td>J3</td>
<td>115</td>
<td>&#160;</td>
<td>&#160;</td>
<td>;No demand at this junction</td>
</tr>
</tbody>
</table>
</div>
<div class="section" id="labels">
<h1>[LABELS]<a class="headerlink" href="#labels" title="Permalink to this headline">¶</a></h1>
<blockquote>
<div><p><strong>Purpose:</strong></p>
<p>Assigns coordinates to map labels.</p>
<p><strong>Format:</strong></p>
<p>One line for each label containing:</p>
</div></blockquote>
<ul class="simple">
<li>X-coordinate</li>
<li>Y-coordinate</li>
<li>Text of label in double quotes</li>
<li>ID label of an anchor node (optional)</li>
</ul>
<blockquote>
<div><strong>Remarks:</strong></div></blockquote>
<ol class="loweralpha simple">
<li>Include one line for each label on the map.</li>
<li>The coordinates refer to the upper left corner of the label and are
with respect to an arbitrary origin at the lower left of the map.</li>
<li>The optional anchor node anchors the label to the node when the map
is re-scaled during zoom-in operations.</li>
<li>The [LABELS] section is optional and is not used at all when EPANET
is run as a console application.</li>
</ol>
<blockquote>
<div><p><strong>Example:</strong></p>
<p>[LABELS]</p>
<p>;X-Coord. Y-Coord. Label Anchor</p>
<p>;———————————————–</p>
</div></blockquote>
<table border="1" class="docutils">
<colgroup>
<col width="22%" />
<col width="22%" />
<col width="38%" />
<col width="18%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">1230</th>
<th class="head">3459</th>
<th class="head">“Pump 1”</th>
<th class="head">&#160;</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td>34.57</td>
<td>12.75</td>
<td>“North Tank”</td>
<td>T22</td>
</tr>
</tbody>
</table>
</div>
<div class="section" id="mixing">
<h1>[MIXING]<a class="headerlink" href="#mixing" title="Permalink to this headline">¶</a></h1>
<blockquote>
<div><p><strong>Purpose:</strong></p>
<p>Identifies the model that governs mixing within storage tanks.</p>
<p><strong>Format:</strong></p>
<p>One line per tank containing:</p>
</div></blockquote>
<ul class="simple">
<li>Tank ID label</li>
<li>Mixing model (MIXED, 2COMP, FIFO, or LIFO)</li>
<li>Compartment volume (fraction)</li>
</ul>
<blockquote>
<div><strong>Remarks:</strong></div></blockquote>
<ol class="loweralpha simple">
<li>Mixing models include:<ul>
<li>Completely Mixed (MIXED)</li>
<li>Two-Compartment Mixing (2COMP)</li>
<li>Plug Flow (FIFO)</li>
<li>Stacked Plug Flow (LIFO)</li>
</ul>
</li>
<li>The compartment volume parameter only applies to the two-compartment
model and represents the fraction of the total tank volume devoted to
the inlet/outlet compartment.</li>
<li>The [MIXING] section is optional. Tanks not described in this section
are assumed to be completely mixed.</li>
</ol>
<blockquote>
<div><p><strong>Example:</strong></p>
<p>[MIXING]</p>
<p>;Tank Model</p>
<p>;———————– T12 LIFO</p>
<p>T23 2COMP 0.2</p>
</div></blockquote>
</div>
<div class="section" id="options">
<span id="options-1"></span><h1>[OPTIONS]<a class="headerlink" href="#options" title="Permalink to this headline">¶</a></h1>
<blockquote>
<div><p><strong>Purpose:</strong></p>
<p>Defines various simulation options.</p>
<p><strong>Formats:</strong></p>
<p><strong>UNITS CFS/GPM/MGD/IMGD/AFD/ LPS/LPM/MLD/CMH/CMD</strong></p>
<p><strong>HEADLOSS H-W/D-W/C-M</strong></p>
<p><strong>HYDRAULICS USE/SAVE</strong> filename</p>
<p><strong>QUALITY NONE/CHEMICAL/AGE/TRACE id</strong></p>
<p><strong>VISCOSITY</strong> value</p>
<p><strong>DIFFUSIVITY</strong> value</p>
<p><strong>SPECIFIC GRAVITY</strong> value</p>
<p><strong>TRIALS</strong> value</p>
<p><strong>ACCURACY</strong> value</p>
<p><strong>UNBALANCED STOP/CONTINUE/CONTINUE n</strong></p>
<p><strong>PATTERN</strong> id</p>
<p><strong>DEMAND MULTIPLIER</strong> value</p>
<p><strong>EMITTER EXPONENT</strong> value</p>
<p><strong>TOLERANCE</strong> value</p>
<p><strong>MAP</strong> filename</p>
<p><strong>Definitions:</strong></p>
<p><strong>UNITS</strong> sets the units in which flow rates are expressed where:</p>
<p><strong>CFS</strong> = cubic feet per second <strong>GPM</strong> = gallons per minute <strong>MGD</strong>
= million gallons per day <strong>IMGD</strong> = Imperial MGD</p>
<p><strong>AFD</strong> = acre-feet per day</p>
<p><strong>LPS</strong> = liters per second</p>
<p><strong>LPM</strong> = liters per minute</p>
<p><strong>MLD</strong> = million liters per day <strong>CMH</strong> = cubic meters per hour
<strong>CMD</strong> = cubic meters per day</p>
<p>For <strong>CFS, GPM, MGD, IMGD</strong>, and <strong>AFD</strong> other input quantities are
expressed in US Customary Units. If flow units are in liters or cubic
meters then Metric Units must be used for all other input quantities
as</p>
<p>well. (See Appendix A. Units of Measurement). The default flow units
are <strong>GPM</strong>.</p>
<p><strong>HEADLOSS</strong> selects a formula to use for computing head loss for
flow through a pipe. The choices are the Hazen-Williams (<strong>H-W</strong>),
Darcy-Weisbach (<strong>D-W</strong>), or Chezy-Manning (<strong>C-M</strong>) formulas. The
default is <strong>H-W</strong>.</p>
<p>The <strong>HYDRAULICS</strong> option allows you to either <strong>SAVE</strong> the current
hydraulics solution to a file or <strong>USE</strong> a previously saved
hydraulics solution. This is useful when studying factors that only
affect water quality behavior.</p>
<p><strong>QUALITY</strong> selects the type of water quality analysis to perform.
The choices are <strong>NONE, CHEMICAL, AGE</strong>, and <strong>TRACE</strong>. In place of
<strong>CHEMICAL</strong> the actual name of the chemical can be used followed by
its concentration units (e.g., <strong>CHLORINE mg/L</strong>). If <strong>TRACE</strong> is
selected it must be followed by the ID label of the node being
traced. The default selection is <strong>NONE</strong> (no water quality
analysis).</p>
<p><strong>VISCOSITY</strong> is the kinematic viscosity of the fluid being modeled
relative to that of water at 20 deg. C (1.0 centistoke). The default
value is 1.0.</p>
<p><strong>DIFFUSIVITY</strong> is the molecular diffusivity of the chemical being
analyzed relative to that of chlorine in water. The default value is
1.0. Diffusivity is only used when mass transfer limitations are
considered in pipe wall reactions. A value of 0 will cause EPANET to
ignore mass transfer limitations.</p>
<p><strong>SPECIFIC GRAVITY</strong> is the ratio of the density of the fluid being
modeled to that of water at 4 deg. C (unitless).</p>
<p><strong>TRIALS</strong> are the maximum number of trials used to solve network
hydraulics at each hydraulic time step of a simulation. The default
is 40.</p>
<p><strong>ACCURACY</strong> prescribes the convergence criterion that determines
when a hydraulic solution has been reached. The trials end when the
sum of all flow changes from the previous solution divided by the
total flow in all links is less than this number. The default is
0.001.</p>
<p><strong>UNBALANCED</strong> determines what happens if a hydraulic solution cannot
be reached within the prescribed number of <strong>TRIALS</strong> at some
hydraulic time step into the simulation. <strong>“STOP”</strong> will halt the
entire analysis at that point. <strong>“CONTINUE”</strong> will continue the
analysis with a warning message issued. <strong>“CONTINUE n”</strong> will
continue the search for a solution for another “n” trials with the
status of all links held fixed at their current settings. The
simulation will be continued at this point with a message issued
about whether convergence was achieved or not. The default choice is
<strong>“STOP”</strong>.</p>
<p><strong>PATTERN</strong> provides the ID label of a default demand pattern to be
applied to all junctions where no demand pattern was specified. If no
such pattern exists in the [PATTERNS] section then by default the
pattern consists of a single multiplier equal to 1.0. If this option
is not used, then the global default demand pattern has a label of
“1”.</p>
<p>The <strong>DEMAND MULTIPLIER</strong> is used to adjust the values of baseline
demands for all junctions and all demand categories. For example, a
value of 2 doubles all baseline demands, while a value of 0.5 would
halve them. The default value is 1.0.</p>
<p><strong>EMITTER EXPONENT</strong> specifies the power to which the pressure at a
junction is raised when computing the flow issuing from an emitter.
The default is 0.5.</p>
<p><strong>MAP</strong> is used to supply the name of a file containing coordinates
of the network’s nodes so that a map of the network can be drawn. It
is not used for any hydraulic or water quality computations.</p>
<p><strong>TOLERANCE</strong> is the difference in water quality level below which
one can say that one parcel of water is essentially the same as
another. The default is 0.01 for all types of quality analyses
(chemical, age (measured in hours), or source tracing (measured in
percent)).</p>
<p><strong>Remarks:</strong></p>
</div></blockquote>
<ol class="loweralpha simple">
<li>All options assume their default values if not explicitly specified
in this section.</li>
<li>Items offset by slashes (/) indicate allowable choices.</li>
</ol>
<blockquote>
<div><p><strong>Example:</strong></p>
<p>[OPTIONS]</p>
<p>UNITS CFS</p>
<p>HEADLOSS D-W</p>
<p>QUALITY TRACE Tank23 UNBALANCED CONTINUE 10</p>
</div></blockquote>
</div>
<div class="section" id="patterns">
<h1>[PATTERNS]<a class="headerlink" href="#patterns" title="Permalink to this headline">¶</a></h1>
<blockquote>
<div><p><strong>Purpose:</strong></p>
<p>Defines time patterns.</p>
<p><strong>Format:</strong></p>
<p>One or more lines for each pattern containing:</p>
</div></blockquote>
<ul class="simple">
<li>Pattern ID label</li>
<li>One or more multipliers</li>
</ul>
<blockquote>
<div><p><strong>Remarks:</strong></p>
<p>a. Multipliers define how some base quantity (e.g., demand) is
adjusted for each time period.</p>
</div></blockquote>
<ol class="loweralpha simple">
<li>All patterns share the same time period interval as defined in the
[TIMES] section.</li>
<li>Each pattern can have a different number of time periods.</li>
<li>When the simulation time exceeds the pattern length the pattern wraps
around to its first period.</li>
<li>Use as many lines as it takes to include all multipliers for each
pattern.</li>
</ol>
<blockquote>
<div><p><strong>Example:</strong></p>
<p>[PATTERNS]</p>
<p>;Pattern P1</p>
</div></blockquote>
<table border="1" class="docutils">
<colgroup>
<col width="40%" />
<col width="20%" />
<col width="20%" />
<col width="20%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">P1 1.1</th>
<th class="head">1.4</th>
<th class="head">0.9</th>
<th class="head">0.7</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td>P1 0.6</td>
<td>0.5</td>
<td>0.8</td>
<td>1.0</td>
</tr>
<tr class="row-odd"><td>;Pattern P2</td>
<td>&#160;</td>
<td>&#160;</td>
<td>&#160;</td>
</tr>
<tr class="row-even"><td>P2 1</td>
<td>1</td>
<td>1</td>
<td>1</td>
</tr>
<tr class="row-odd"><td>P2 0</td>
<td>0</td>
<td>1</td>
<td>&#160;</td>
</tr>
</tbody>
</table>
</div>
<div class="section" id="pipes">
<h1>[PIPES]<a class="headerlink" href="#pipes" title="Permalink to this headline">¶</a></h1>
<blockquote>
<div><p><strong>Purpose:</strong></p>
<p>Defines all pipe links contained in the network.</p>
<p><strong>Format:</strong></p>
<p>One line for each pipe containing:</p>
</div></blockquote>
<ul class="simple">
<li>ID label of pipe</li>
<li>ID of start node</li>
<li>ID of end node</li>
<li>Length, ft (m)</li>
<li>Diameter, inches (mm)</li>
<li>Roughness coefficient</li>
<li>Minor loss coefficient</li>
<li>Status (OPEN, CLOSED, or CV)</li>
</ul>
<blockquote>
<div><strong>Remarks:</strong></div></blockquote>
<ol class="loweralpha simple">
<li>Roughness coefficient is unitless for the Hazen-Williams and
Chezy-Manning head loss formulas and has units of millifeet (mm) for
the Darcy-Weisbach formula. Choice of head loss formula is supplied
in the [OPTIONS] section.</li>
<li>Setting status to CV means that the pipe contains a check valve
restricting flow to one direction.</li>
<li>If minor loss coefficient is 0 and pipe is OPEN then these two items
can be dropped form the input line.</li>
</ol>
<blockquote>
<div><p><strong>Example:</strong></p>
<p>[PIPES]</p>
<p>;ID Node1 Node2 Length Diam. Roughness Mloss Status</p>
<p>;————————————————————-</p>
</div></blockquote>
<table border="1" class="docutils">
<colgroup>
<col width="12%" />
<col width="12%" />
<col width="14%" />
<col width="11%" />
<col width="7%" />
<col width="14%" />
<col width="14%" />
<col width="16%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">P1</th>
<th class="head">J1</th>
<th class="head">J2</th>
<th class="head">1200</th>
<th class="head">12</th>
<th class="head">120</th>
<th class="head">0.2</th>
<th class="head">OPEN</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td>P2</td>
<td>J3</td>
<td>J2</td>
<td>600</td>
<td>6</td>
<td>110</td>
<td>0</td>
<td>CV</td>
</tr>
<tr class="row-odd"><td>P3</td>
<td>J1</td>
<td>J10</td>
<td>1000</td>
<td>12</td>
<td>120</td>
<td>&#160;</td>
<td>&#160;</td>
</tr>
</tbody>
</table>
</div>
<div class="section" id="pumps">
<h1>[PUMPS]<a class="headerlink" href="#pumps" title="Permalink to this headline">¶</a></h1>
<blockquote>
<div><p><strong>Purpose:</strong></p>
<p>Defines all pump links contained in the network.</p>
<p><strong>Format:</strong></p>
<p>One line for each pump containing:</p>
</div></blockquote>
<ul class="simple">
<li>ID label of pump</li>
<li>ID of start node</li>
<li>ID of end node</li>
<li>Keyword and Value (can be repeated)</li>
</ul>
<blockquote>
<div><strong>Remarks:</strong></div></blockquote>
<ol class="loweralpha simple">
<li>Keywords consists of:<ul>
<li><strong>POWER</strong> – power value for constant energy pump, hp (kW)</li>
<li><strong>HEAD</strong> - ID of curve that describes head versus flow for the
pump</li>
<li><strong>SPEED</strong> - relative speed setting (normal speed is 1.0, 0 means
pump is off)</li>
<li><strong>PATTERN</strong> - ID of time pattern that describes how speed setting
varies with time</li>
</ul>
</li>
<li>Either <strong>POWER</strong> or <strong>HEAD</strong> must be supplied for each pump. The
other keywords are optional.</li>
</ol>
<blockquote>
<div><p><strong>Example:</strong></p>
<p>[PUMPS]</p>
<p>;ID Node1 Node2 Properties</p>
<p>;———————————————</p>
</div></blockquote>
<table border="1" class="docutils">
<colgroup>
<col width="19%" />
<col width="17%" />
<col width="15%" />
<col width="49%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">Pump1</th>
<th class="head">N12</th>
<th class="head">N32</th>
<th class="head">HEAD Curve1</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td>Pump2</td>
<td>N121</td>
<td>N55</td>
<td>HEAD Curve1 SPEED 1.2</td>
</tr>
<tr class="row-odd"><td>Pump3</td>
<td>N22</td>
<td>N23</td>
<td>POWER 100</td>
</tr>
</tbody>
</table>
</div>
<div class="section" id="quality">
<h1>[QUALITY]<a class="headerlink" href="#quality" title="Permalink to this headline">¶</a></h1>
<blockquote>
<div><p><strong>Purpose:</strong></p>
<p>Defines initial water quality at nodes.</p>
<p><strong>Format:</strong></p>
<p>One line per node containing:</p>
</div></blockquote>
<ul class="simple">
<li>Node ID label</li>
<li>Initial quality</li>
</ul>
<blockquote>
<div><strong>Remarks:</strong></div></blockquote>
<ol class="loweralpha simple">
<li>Quality is assumed to be zero for nodes not listed.</li>
<li>Quality represents concentration for chemicals, hours for water age,
or percent for source tracing.</li>
<li>The [QUALITY] section is optional.</li>
</ol>
</div>
<div class="section" id="reactions">
<h1>[REACTIONS]<a class="headerlink" href="#reactions" title="Permalink to this headline">¶</a></h1>
<blockquote>
<div><p><strong>Purpose:</strong></p>
<p>Defines parameters related to chemical reactions occurring in the
network.</p>
<p><strong>Formats:</strong></p>
<p><strong>ORDER BULK/WALL/TANK</strong> value</p>
<p><strong>GLOBAL BULK/WALL</strong> value</p>
<p><strong>BULK/WALL/TANK</strong> pipeID value <strong>LIMITING POTENTIAL</strong> value
<strong>ROUGHNESS CORRELATION</strong> value</p>
<p><strong>Definitions:</strong></p>
<p><strong>ORDER</strong> is used to set the order of reactions occurring in the bulk
fluid, at the pipe wall, or in tanks, respectively. Values for wall
reactions must be either 0 or 1. If not supplied the default reaction
order is 1.0.</p>
<p><strong>GLOBAL</strong> is used to set a global value for all bulk reaction
coefficients (pipes and tanks) or for all pipe wall coefficients. The
default value is zero.</p>
<p><strong>BULK, WALL</strong>, and <strong>TANK</strong> are used to override the global reaction
coefficients for specific pipes and tanks.</p>
<p><strong>LIMITING POTENTIAL</strong> specifies that reaction rates are proportional
to the difference between the current concentration and some limiting
potential value.</p>
<p><strong>ROUGHNESS CORRELATION</strong> will make all default pipe wall reaction
coefficients be related to pipe roughness in the following manner:</p>
<p>Head Loss Equation Roughness Correlation Hazen-Williams F / C</p>
<p>Darcy-Weisbach F / log(e/D)</p>
<p>Chezy-Manning F*n</p>
<p>where F = roughness correlation, C = Hazen-Williams C-factor, e =
Darcy-Weisbach roughness, D = pipe diameter, and n = Chezy-Manning
roughness coefficient. The default value computed this way can be
overridden for any pipe by using the <strong>WALL</strong> format to supply a
specific value for the pipe.</p>
<p><strong>Remarks:</strong></p>
</div></blockquote>
<ol class="loweralpha simple">
<li>Remember to use positive numbers for growth reaction coefficients and
negative numbers for decay coefficients.</li>
<li>The time units for all reaction coefficients are 1/days.</li>
<li>All entries in this section are optional. Items offset by slashes (/)
indicate allowable choices.</li>
</ol>
<blockquote>
<div><p><strong>Example:</strong></p>
<p>[REACTIONS]</p>
<p>ORDER WALL 0 ;Wall reactions are zero-order GLOBAL BULK -0.5 ;Global
bulk decay coeff.</p>
<p>GLOBAL WALL -1.0 ;Global wall decay coeff. WALL P220 -0.5
;Pipe-specific wall coeffs. WALL P244 -0.7</p>
</div></blockquote>
</div>
<div class="section" id="report">
<h1>[REPORT]<a class="headerlink" href="#report" title="Permalink to this headline">¶</a></h1>
<blockquote>
<div><p><strong>Purpose:</strong></p>
<p>Describes the contents of the output report produced from a
simulation.</p>
<p><strong>Formats:</strong></p>
<p><strong>PAGESIZE</strong> value</p>
<p><strong>FILE</strong> filename</p>
<p><strong>STATUS YES/NO/FULL</strong></p>
<p><strong>SUMMARY YES/NO</strong></p>
<p><strong>ENERGY YES/NO</strong></p>
<p><strong>NODES NONE/ALL/</strong>node1 node2 …</p>
<p><strong>LINKS NONE/ALL/</strong>link1 link2 …</p>
<p>parameter <strong>YES/NO</strong></p>
<p>parameter <strong>BELOW/ABOVE/PRECISION</strong> value</p>
<p><strong>Definitions:</strong></p>
<p><strong>PAGESIZE</strong> sets the number of lines written per page of the output
report. The default is 0, meaning that no line limit per page is in
effect.</p>
<p><strong>FILE</strong> supplies the name of a file to which the output report will
be written (ignored by the Windows version of EPANET).</p>
<p><strong>STATUS</strong> determines whether a hydraulic status report should be
generated. If <strong>YES</strong> is selected the report will identify all
network components that change status during each time step of the
simulation. If <strong>FULL</strong> is selected, then the status report will also
include information from each trial of each hydraulic analysis. This
level of detail is only useful for de-bugging networks that become
hydraulically unbalanced. The default is <strong>NO</strong>.</p>
<p><strong>SUMMARY</strong> determines whether a summary table of number of network
components and key analysis options is generated. The default is
<strong>YES</strong>.</p>
<p><strong>ENERGY</strong> determines if a table reporting average energy usage and
cost for each pump is provided. The default is NO.</p>
<p><strong>NODES</strong> identifies which nodes will be reported on. You can either
list individual node ID labels or use the keywords <strong>NONE</strong> or
<strong>ALL</strong>. Additional <strong>NODES</strong> lines can be used to continue the list.
The default is <strong>NONE</strong>.</p>
<p><strong>LINKS</strong> identifies which links will be reported on. You can either
list individual link ID labels or use the keywords <strong>NONE</strong> or
<strong>ALL</strong>. Additional <strong>LINKS</strong> lines can be used to continue the list.
The default is <strong>NONE</strong>.</p>
<p>The “parameter” reporting option is used to identify which quantities
are reported on, how many decimal places are displayed, and what kind
of filtering should be used to limit output reporting. Node
parameters that can be reported on include:</p>
</div></blockquote>
<ul class="simple">
<li><strong>Elevation</strong></li>
<li><strong>Demand</strong></li>
<li><strong>Head</strong></li>
<li><strong>Pressure</strong></li>
<li><strong>Quality.</strong></li>
</ul>
<blockquote>
<div>Link parameters include:</div></blockquote>
<ul class="simple">
<li><strong>Length</strong></li>
<li><strong>Diameter</strong></li>
<li><strong>Flow</strong></li>
<li><strong>Velocity</strong></li>
<li><strong>Headloss</strong></li>
<li><strong>Position</strong> (same as status – open, active, closed)</li>
<li><strong>Setting</strong> (Roughness for pipes, speed for pumps, pressure/flow
setting for valves)</li>
<li><strong>Reaction</strong> (reaction rate)</li>
<li><strong>F-Factor</strong> (friction factor).</li>
</ul>
<blockquote>
<div><p>The default quantities reported are <strong>Demand, Head, Pressure</strong>, and
<strong>Quality</strong> for nodes and</p>
<p><strong>Flow, Velocity</strong>, and <strong>Headloss</strong> for links. The default precision
is two decimal places.</p>
<p><strong>Remarks:</strong></p>
</div></blockquote>
<ol class="loweralpha simple">
<li>All options assume their default values if not explicitly specified
in this section.</li>
<li>Items offset by slashes (/) indicate allowable choices.</li>
<li>The default is to not report on any nodes or links, so a <strong>NODES</strong> or
<strong>LINKS</strong> option must be supplied if you wish to report results for
these items.</li>
<li>For the Windows version of EPANET, the only [REPORT] option
recognized is <strong>STATUS</strong>. All others are ignored.</li>
</ol>
<blockquote>
<div><p><strong>Example:</strong></p>
<p>The following example reports on nodes N1, N2, N3, and N17 and all
links with velocity above 3.0. The standard node parameters (Demand,
Head, Pressure, and Quality) are reported on while only Flow,
Velocity, and F-Factor (friction factor) are displayed for links.</p>
<p>[REPORT]</p>
<p>NODES N1 N2 N3 N17 LINKS ALL</p>
<p>FLOW YES</p>
<p>VELOCITY PRECISION 4</p>
</div></blockquote>
<ol class="upperalpha simple" start="6">
<li>ACTOR PRECISION 4</li>
</ol>
<blockquote>
<div>VELOCITY ABOVE 3.0</div></blockquote>
</div>
<div class="section" id="reservoirs">
<h1>[RESERVOIRS]<a class="headerlink" href="#reservoirs" title="Permalink to this headline">¶</a></h1>
<blockquote>
<div><p><strong>Purpose:</strong></p>
<p>Defines all reservoir nodes contained in the network.</p>
<p><strong>Format:</strong></p>
<p>One line for each reservoir containing:</p>
</div></blockquote>
<ul class="simple">
<li>ID label</li>
<li>Head, ft (m)</li>
<li>Head pattern ID (optional)</li>
</ul>
<blockquote>
<div><strong>Remarks:</strong></div></blockquote>
<ol class="loweralpha simple">
<li>Head is the hydraulic head (elevation + pressure head) of water in
the reservoir.</li>
<li>A head pattern can be used to make the reservoir head vary with time.</li>
<li>At least one reservoir or tank must be contained in the network.</li>
</ol>
<blockquote>
<div><p><strong>Example:</strong></p>
<p>[RESERVOIRS]</p>
<p>;ID Head Pattern</p>
<p>;———————</p>
<p>R1 512 ;Head stays constant R2 120 Pat1 ;Head varies with time</p>
</div></blockquote>
</div>
<div class="section" id="rules">
<h1>[RULES]<a class="headerlink" href="#rules" title="Permalink to this headline">¶</a></h1>
<blockquote>
<div><p><strong>Purpose:</strong></p>
<p>Defines rule-based controls that modify links based on a combination
of conditions.</p>
<p><strong>Format:</strong></p>
<p>Each rule is a series of statements of the form:</p>
<p><strong>RULE</strong> ruleID</p>
<p><strong>IF</strong> condition_1 <strong>AND</strong> condition_2 <strong>OR</strong> condition_3 <strong>AND</strong>
condition_4 etc.</p>
<p><strong>THEN</strong> action_1 <strong>AND</strong> action_2 etc.</p>
<p><strong>ELSE</strong> action_3 <strong>AND</strong> action_4 etc.</p>
<p><strong>PRIORITY</strong> value</p>
<p>where:</p>
</div></blockquote>
<table border="1" class="docutils">
<colgroup>
<col width="22%" />
<col width="4%" />
<col width="74%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">ruleID</th>
<th class="head">=</th>
<th class="head">an ID label assigned to the rule</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td>conditon_n</td>
<td>=</td>
<td>a condition clause</td>
</tr>
<tr class="row-odd"><td>action_n</td>
<td>=</td>
<td>an action clause</td>
</tr>
<tr class="row-even"><td>Priority</td>
<td>=</td>
<td>a priority value (e.g., a number from 1 to 5)</td>
</tr>
</tbody>
</table>
<blockquote>
<div><p><strong>Condition Clause Format:</strong></p>
<p>A condition clause in a Rule-Based Control takes the form of:</p>
</div></blockquote>
<p>object id attribute relation value</p>
<blockquote>
<div><p>where</p>
<p>object = a category of network object</p>
<p>id = the object’s ID label</p>
<p>attribute = an attribute or property of the object</p>
<p>relation = a relational operator</p>
<p>value = an attribute value</p>
<p>Some example conditional clauses are:</p>
<p>JUNCTION 23 PRESSURE &gt; 20 TANK T200 FILLTIME BELOW 3.5 LINK 44 STATUS
IS OPEN SYSTEM DEMAND &gt;= 1500</p>
<p>SYSTEM CLOCKTIME = 7:30 AM</p>
<p>The Object keyword can be any of the following:</p>
<p><strong>NODE LINK SYSTEM</strong></p>
<p><strong>JUNCTION PIPE RESERVOIR PUMP TANK VALVE</strong></p>
<p>When <strong>SYSTEM</strong> is used in a condition no ID is supplied.</p>
<p>The following attributes can be used with Node-type objects:</p>
<p><strong>DEMAND HEAD PRESSURE</strong></p>
<p>The following attributes can be used with Tanks:</p>
<p><strong>LEVEL</strong></p>
<p><strong>FILLTIME</strong> (hours needed to fill a tank)</p>
<p><strong>DRAINTIME</strong> (hours needed to empty a tank)</p>
<p>These attributes can be used with Link-Type objects:</p>
<p><strong>FLOW</strong></p>
<p><strong>STATUS</strong> (<strong>OPEN</strong>, <strong>CLOSED</strong>, or <strong>ACTIVE</strong>)</p>
<p><strong>SETTING</strong> (pump speed or valve setting)</p>
<p>The <strong>SYSTEM</strong> object can use the following attributes:</p>
<p><strong>DEMAND</strong> (total system demand)</p>
<p><strong>TIME</strong> (hours from the start of the simulation expressed either as
a decimal number or in hours:minutes format)</p>
<p><strong>CLOCKTIME</strong> (24-hour clock time with <strong>AM</strong> or <strong>PM</strong> appended)</p>
<p>Relation operators consist of the following:</p>
<p><strong>= IS</strong></p>
<p><strong>&lt;&gt; NOT</strong></p>
<p><strong>&lt; BELOW</strong></p>
<p><strong>&gt; ABOVE</strong></p>
<p><strong>&lt;= &gt;=</strong></p>
<p><strong>Action Clause Format:</strong></p>
<p>An action clause in a Rule-Based Control takes the form of:</p>
<p>object id STATUS/SETTING IS value</p>
</div></blockquote>
<table border="1" class="docutils">
<colgroup>
<col width="25%" />
<col width="25%" />
<col width="25%" />
<col width="25%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">where</th>
<th class="head">&#160;</th>
<th class="head">&#160;</th>
<th class="head">&#160;</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td>&#160;</td>
<td>object</td>
<td>=</td>
<td><strong>LINK</strong>,
<strong>PIPE</strong>,
<strong>PUMP</strong>, or
<strong>VALVE</strong>
keyword</td>
</tr>
<tr class="row-odd"><td>&#160;</td>
<td>id</td>
<td>=</td>
<td>the object’s
ID label</td>
</tr>
<tr class="row-even"><td>&#160;</td>
<td>value</td>
<td>=</td>
<td>a status
condition
(<strong>OPEN</strong> or
<strong>CLOSED</strong>),
pump speed
setting, or
valve
setting</td>
</tr>
</tbody>
</table>
<blockquote>
<div><p>Some example action clauses are:</p>
<p>LINK 23 STATUS IS CLOSED PUMP P100 SETTING IS 1.5 VALVE 123 SETTING
IS 90</p>
<p><strong>Remarks:</strong></p>
</div></blockquote>
<ol class="loweralpha simple">
<li>Only the <strong>RULE</strong>, <strong>IF</strong> and <strong>THEN</strong> portions of a rule are
required; the other portions are optional.</li>
<li>When mixing <strong>AND</strong> and <strong>OR</strong> clauses, the <strong>OR</strong> operator has
higher precedence than <strong>AND</strong>, i.e.,</li>
</ol>
<blockquote>
<div><p>IF A or B and C</p>
<p>is equivalent to</p>
<p>IF (A or B) and C.</p>
</div></blockquote>
<p>If the interpretation was meant to be</p>
<blockquote>
<div><p>IF A or (B and C)</p>
<p>then this can be expressed using two rules as in</p>
<p>IF A THEN …</p>
<p>IF B and C THEN …</p>
</div></blockquote>
<ol class="loweralpha simple" start="3">
<li>The <strong>PRIORITY</strong> value is used to determine which rule applies when
two or more rules require that conflicting actions be taken on a
link. A rule without a priority value always has a lower priority
than one with a value. For two rules with the same priority value,
the rule that appears first is given the higher priority.</li>
</ol>
<blockquote>
<div><p><strong>Example:</strong></p>
<p>[RULES] RULE 1</p>
<p>IF TANK 1 LEVEL ABOVE 19.1 THEN PUMP 335 STATUS IS CLOSED AND PIPE
330 STATUS IS OPEN</p>
<p>RULE 2</p>
<p>IF SYSTEM CLOCKTIME &gt;= 8 AM AND SYSTEM CLOCKTIME &lt; 6 PM AND TANK 1
LEVEL BELOW 12 THEN PUMP 335 STATUS IS OPEN</p>
<p>RULE 3</p>
<p>IF SYSTEM CLOCKTIME &gt;= 6 PM OR SYSTEM CLOCKTIME &lt; 8 AM AND TANK 1
LEVEL BELOW 14 THEN PUMP 335 STATUS IS OPEN</p>
</div></blockquote>
</div>
<div class="section" id="sources">
<h1>[SOURCES]<a class="headerlink" href="#sources" title="Permalink to this headline">¶</a></h1>
<blockquote>
<div><p><strong>Purpose:</strong></p>
<p>Defines locations of water quality sources.</p>
<p><strong>Format:</strong></p>
<p>One line for each water quality source containing:</p>
</div></blockquote>
<ul class="simple">
<li>Node ID label</li>
<li>Source type (<strong>CONCEN, MASS, FLOWPACED</strong>, or <strong>SETPOINT</strong>)</li>
<li>Baseline source strength</li>
<li>Time pattern ID (optional)</li>
</ul>
<blockquote>
<div><strong>Remarks:</strong></div></blockquote>
<ol class="loweralpha simple">
<li>For <strong>MASS</strong> type sources, strength is measured in mass flow per
minute. All other types measure source strength in concentration
units.</li>
<li>Source strength can be made to vary over time by specifying a time
pattern.</li>
<li>A <strong>CONCEN</strong> source:<ul>
<li>represents the concentration of any external source inflow to the
node</li>
<li>applies only when the node has a net negative demand (water enters
the network at the node)</li>
<li>if the node is a junction, reported concentration is the result of
mixing the source flow and inflow from the rest of the network</li>
<li>if the node is a reservoir, the reported concentration is the
source concentration</li>
<li>if the node is a tank, the reported concentration is the internal
concentration of the tank</li>
<li>is best used for nodes that represent source water supplies or
treatment works (e.g., reservoirs or nodes assigned a negative
demand)</li>
<li>should not be used at storage tanks with simultaneous
inflow/outflow.</li>
</ul>
</li>
<li>A <strong>MASS, FLOWPACED</strong>, or <strong>SETPOINT</strong> source:<ul>
<li>represents a booster source, where the substance is injected
directly into the network irregardless of what the demand at the
node is</li>
<li>affects water leaving the node to the rest of the network in the
following way:<ul>
<li>a <strong>MASS</strong> booster adds a fixed mass flow to that resulting
from inflow to the node</li>
<li>a <strong>FLOWPACED</strong> booster adds a fixed concentration to the
resultant inflow concentration at the node</li>
<li>a <strong>SETPOINT</strong> booster fixes the concentration of any flow
leaving the node (as long as the concentration resulting from
the inflows is below the setpoint)</li>
</ul>
</li>
<li>the reported concentration at a junction or reservoir booster
source is the concentration that results after the boosting is
applied; the reported concentration for a tank with a booster
source is the internal concentration of the tank</li>
<li>is best used to model direct injection of a tracer or disinfectant
into the network or to model a contaminant intrusion.</li>
</ul>
</li>
<li>A [SOURCES] section is not needed for simulating water age or source
tracing.</li>
</ol>
<blockquote>
<div><p><strong>Example:</strong></p>
<p>[SOURCES]</p>
<p>;Node Type Strength Pattern</p>
<p>;——————————–</p>
<p>N1 CONCEN 1.2 Pat1 ;Concentration varies with time N44 MASS 12
;Constant mass injection</p>
</div></blockquote>
</div>
<div class="section" id="status">
<h1>[STATUS]<a class="headerlink" href="#status" title="Permalink to this headline">¶</a></h1>
<blockquote>
<div><p><strong>Purpose:</strong></p>
<p>Defines initial status of selected links at the start of a
simulation.</p>
<p><strong>Format:</strong></p>
<p>One line per link being controlled containing:</p>
</div></blockquote>
<ul class="simple">
<li>Link ID label</li>
<li>Status or setting</li>
</ul>
<blockquote>
<div><strong>Remarks:</strong></div></blockquote>
<ol class="loweralpha simple">
<li>Links not listed in this section have a default status of <strong>OPEN</strong>
(for pipes and pumps) or <strong>ACTIVE</strong> (for valves).</li>
<li>The status value can be <strong>OPEN</strong> or <strong>CLOSED</strong>. For control valves
(e.g., PRVs, FCVs, etc.) this means that the valve is either fully
opened or closed, not active at its control setting.</li>
<li>The setting value can be a speed setting for pumps or valve setting
for valves.</li>
<li>The initial status of pipes can also be set in the [PIPES] section.</li>
<li>Check valves cannot have their status be preset.</li>
<li>Use [CONTROLS] or [RULES] to change status or setting at some future
point in the simulation.</li>
<li>If a <strong>CLOSED</strong> or <strong>OPEN</strong> control valve is to become <strong>ACTIVE</strong>
again, then its pressure or flow setting must be specified in the
control or rule that re-activates it.</li>
</ol>
<div class="section" id="example">
<h2>Example:<a class="headerlink" href="#example" title="Permalink to this headline">¶</a></h2>
<blockquote>
<div><p>[STATUS]</p>
<p>; Link Status/Setting</p>
<p>;———————-</p>
<p>L22 CLOSED ;Link L22 is closed P14 1.5 ;Speed for pump P14</p>
<p>PRV1 OPEN ;PRV1 forced open</p>
<p>;(overrides normal operation)</p>
</div></blockquote>
</div>
</div>
<div class="section" id="tags">
<h1>[TAGS]<a class="headerlink" href="#tags" title="Permalink to this headline">¶</a></h1>
<blockquote>
<div><p><strong>Purpose:</strong></p>
<p>Associates category labels (tags) with specific nodes and links.</p>
<p><strong>Format:</strong></p>
<p>One line for each node and link with a tag containing</p>
</div></blockquote>
<ul class="simple">
<li>the keyword NODE or LINK</li>
<li>the node or link ID label</li>
<li>the text of the tag label (with no spaces)</li>
</ul>
<blockquote>
<div><strong>Remarks:</strong></div></blockquote>
<ol class="loweralpha simple">
<li>Tags can be useful for assigning nodes to different pressure zones or
for classifying pipes by material or age.</li>
<li>If a node or link’s tag is not identified in this section then it is
assumed to be blank.</li>
<li>The [TAGS] section is optional and has no effect on the hydraulic or
water quality calculations.</li>
</ol>
<blockquote>
<div><p><strong>Example:</strong></p>
<p>[TAGS]</p>
<p>;Object ID Tag</p>
<p>;——————————</p>
</div></blockquote>
<table border="1" class="docutils">
<colgroup>
<col width="31%" />
<col width="21%" />
<col width="48%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">NODE</th>
<th class="head">1001</th>
<th class="head">Zone_A</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td>NODE</td>
<td>1002</td>
<td>Zone_A</td>
</tr>
<tr class="row-odd"><td>NODE</td>
<td>45</td>
<td>Zone_B</td>
</tr>
<tr class="row-even"><td>LINK</td>
<td>201</td>
<td>UNCI-1960</td>
</tr>
<tr class="row-odd"><td>LINK</td>
<td>202</td>
<td>PVC-1985</td>
</tr>
</tbody>
</table>
</div>
<div class="section" id="tanks">
<h1>[TANKS]<a class="headerlink" href="#tanks" title="Permalink to this headline">¶</a></h1>
<blockquote>
<div><p><strong>Purpose:</strong></p>
<p>Defines all tank nodes contained in the network.</p>
<p><strong>Format:</strong></p>
<p>One line for each tank containing:</p>
</div></blockquote>
<ul class="simple">
<li>ID label</li>
<li>Bottom elevation, ft (m)</li>
<li>Initial water level, ft (m)</li>
<li>Minimum water level, ft (m)</li>
<li>Maximum water level, ft (m)</li>
<li>Nominal diameter, ft (m)</li>
<li>Minimum volume, cubic ft (cubic meters)</li>
<li>Volume curve ID (optional)</li>
</ul>
<blockquote>
<div><strong>Remarks:</strong></div></blockquote>
<ol class="loweralpha simple">
<li>Water surface elevation equals bottom elevation plus water level.</li>
<li>Non-cylindrical tanks can be modeled by specifying a curve of volume
versus water depth in the [CURVES] section.</li>
<li>If a volume curve is supplied the diameter value can be any non-zero
number</li>
<li>Minimum volume (tank volume at minimum water level) can be zero for a
cylindrical tank or if a volume curve is supplied.</li>
<li>A network must contain at least one tank or reservoir.</li>
</ol>
<blockquote>
<div><p><strong>Example:</strong></p>
<p>[TANKS]</p>
<p>;ID Elev. InitLvl MinLvl MaxLvl Diam MinVol VolCurve</p>
<p>;———————————————————–</p>
<p>;Cylindrical tank</p>
<p>T1 100 15 5 25 120 0</p>
<p>;Non-cylindrical tank with arbitrary diameter</p>
<p>T2 100 15 5 25 1 0 VC1</p>
</div></blockquote>
</div>
<div class="section" id="times">
<h1>[TIMES]<a class="headerlink" href="#times" title="Permalink to this headline">¶</a></h1>
<blockquote>
<div><p><strong>Purpose:</strong></p>
<p>Defines various time step parameters used in the simulation.</p>
<p><strong>Formats:</strong></p>
<p><strong>DURATION</strong></p>
<p><strong>HYDRAULIC TIMESTEP QUALITY TIMESTEP RULE TIMESTEP PATTERN TIMESTEP
PATTERN START REPORT TIMESTEP REPORT START</strong></p>
<p><strong>START CLOCKTIME STATISTIC</strong></p>
<p><strong>Definitions:</strong></p>
<p>Value (units) Value (units) Value (units) Value (units) Value (units)
Value (units) Value (units) Value (units) Value (<strong>AM/PM</strong>)</p>
<p><strong>NONE/AVERAGED/ MINIMUM/MAXIMUM RANGE</strong></p>
<p><strong>DURATION</strong> is the duration of the simulation. Use 0 to run a single
period snapshot analysis. The default is 0.</p>
<p><strong>HYDRAULIC TIMESTEP</strong> determines how often a new hydraulic state of
the network is computed. If greater than either the <strong>PATTERN</strong> or
<strong>REPORT</strong> time step it will be automatically reduced. The default is
1 hour.</p>
<p><strong>QUALITY TIMESTEP</strong> is the time step used to track changes in water
quality throughout the network. The default is 1/10 of the hydraulic
time step.</p>
<p><strong>RULE TIMESTEP</strong> is the time step used to check for changes in
system status due to activation of rule-based controls between
hydraulic time steps. The default is 1/10 of the hydraulic time step.</p>
<p><strong>PATTERN TIMESTEP</strong> is the interval between time periods in all time
patterns. The default is 1 hour.</p>
<p><strong>PATTERN START</strong> is the time offset at which all patterns will
start. For example, a value of 6 hours would start the simulation
with each pattern in the time period that corresponds to hour 6. The
default is 0.</p>
<p><strong>REPORT TIMESTEP</strong> sets the time interval between which output
results are reported. The default is 1 hour.</p>
<p><strong>REPORT START</strong> is the length of time into the simulation at which
output results begin to be reported. The default is 0.</p>
<p><strong>START CLOCKTIME</strong> is the time of day (e.g., 3:00 PM) at which the
simulation begins. The default is 12:00 AM midnight.</p>
<p><strong>STATISTIC</strong> determines what kind of statistical post-processing
should be done on the time series of simulation results generated.
<strong>AVERAGED</strong> reports a set of time-averaged results, <strong>MINIMUM</strong>
reports only the minimum values, <strong>MAXIMUM</strong> the maximum values, and
<strong>RANGE</strong> reports the difference between the minimum and maximum
values. <strong>NONE</strong> reports the full time series for all quantities for
all nodes and links and is the default.</p>
<p><strong>Remarks:</strong></p>
</div></blockquote>
<ol class="loweralpha simple">
<li>Units can be <strong>SECONDS (SEC), MINUTES (MIN), HOURS</strong>, or <strong>DAYS</strong>.
The default is hours.</li>
<li>If units are not supplied, then time values can be entered as decimal
hours or in hours:minutes notation.</li>
<li>All entries in the [TIMES] section are optional. Items offset by
slashes (/) indicate allowable choices.</li>
</ol>
<blockquote>
<div><p><strong>Example:</strong></p>
<p>[TIMES]</p>
<p>DURATION 240 HOURS QUALITY TIMESTEP 3 MIN REPORT START 120</p>
<p>STATISTIC AVERAGED START CLOCKTIME 6:00 AM</p>
</div></blockquote>
</div>
<div class="section" id="title">
<h1>[TITLE]<a class="headerlink" href="#title" title="Permalink to this headline">¶</a></h1>
<blockquote>
<div><p><strong>Purpose:</strong></p>
<p>Attaches a descriptive title to the network being analyzed.</p>
<p><strong>Format:</strong></p>
<p>Any number of lines of text.</p>
<p><strong>Remarks:</strong></p>
<p>The [TITLE] section is optional.</p>
</div></blockquote>
</div>
<div class="section" id="valves">
<h1>[VALVES]<a class="headerlink" href="#valves" title="Permalink to this headline">¶</a></h1>
<blockquote>
<div><p><strong>Purpose:</strong></p>
<p>Defines all control valve links contained in the network.</p>
<p><strong>Format:</strong></p>
<p>One line for each valve containing:</p>
</div></blockquote>
<ul class="simple">
<li>ID label of valve</li>
<li>ID of start node</li>
<li>ID of end node</li>
<li>Diameter, inches (mm)</li>
<li>Valve type</li>
<li>Valve setting</li>
<li>Minor loss coefficient</li>
</ul>
<blockquote>
<div><strong>Remarks:</strong></div></blockquote>
<ol class="loweralpha simple">
<li>Valve types and settings include:</li>
</ol>
<blockquote>
<div><p>Valve Type Setting PRV (pressure reducing valve) Pressure, psi (m)</p>
<p>PSV (pressure sustaining valve) Pressure, psi (m)</p>
<p>PBV (pressure breaker valve) Pressure, psi (m) FCV (flow control
valve) Flow (flow units)</p>
<p>TCV (throttle control valve) Loss Coefficient GPV (general purpose
valve) ID of head loss curve</p>
</div></blockquote>
<ol class="loweralpha simple" start="2">
<li>Shutoff valves and check valves are considered to be part of a pipe,
not a separate control valve component (see [PIPES])</li>
</ol>
</div>
<div class="section" id="vertices">
<h1>[VERTICES]<a class="headerlink" href="#vertices" title="Permalink to this headline">¶</a></h1>
<blockquote>
<div><p><strong>Purpose:</strong></p>
<p>Assigns interior vertex points to network links.</p>
<p><strong>Format:</strong></p>
<p>One line for each point in each link containing such points that
includes:</p>
</div></blockquote>
<ul class="simple">
<li>Link ID label</li>
<li>X-coordinate</li>
<li>Y-coordinate</li>
</ul>
<blockquote>
<div><strong>Remarks:</strong></div></blockquote>
<ol class="loweralpha simple">
<li>Vertex points allow links to be drawn as polylines instead of simple
straight-lines between their end nodes.</li>
<li>The coordinates refer to the same coordinate system used for node and
label coordinates.</li>
<li>A [VERTICES] section is optional and is not used at all when EPANET
is run as a console application.</li>
</ol>
<blockquote>
<div><p><strong>Example:</strong></p>
<p>[COORDINATES]</p>
<p>;Node X-Coord. Y-Coord</p>
<p>;——————————-</p>
</div></blockquote>
<table border="1" class="docutils">
<colgroup>
<col width="33%" />
<col width="39%" />
<col width="28%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">1</th>
<th class="head">10023</th>
<th class="head">128</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td>2</td>
<td>10056</td>
<td>95</td>
</tr>
</tbody>
</table>
<div class="section" id="report-file-format">
<h2>Report File Format<a class="headerlink" href="#report-file-format" title="Permalink to this headline">¶</a></h2>
<blockquote>
<div>Statements supplied to the [REPORT] section of the input file control
the contents of the report file generated from a command-line run of
EPANET. A portion of the report generated from the input file of
Figure C.1 is shown in Figure C.2. In general a report can contain
the following sections:</div></blockquote>
<ul class="simple">
<li>Status Section</li>
<li>Energy Section</li>
<li>Nodes Section</li>
<li>Links Section</li>
</ul>
<blockquote>
<div><p>Status Section</p>
<p>The Status Section of the output report lists the initial status of
all reservoirs, tanks, pumps, valves, and closed pipes as well as any
changes in the status of these components as they occur over time in
an extended period simulation. The status of reservoirs and tanks
indicates whether they are filling or emptying. The status of links
indicates whether they are open or closed and includes the relative
speed setting for pumps and the pressure/flow setting for control
valves. To include a Status Section in the report use the command
<strong>STATUS YES</strong> in the [REPORT] section of the input file.</p>
<p>Using <strong>STATUS FULL</strong> will also produce a full listing of the
convergence results for all iterations of each hydraulic analysis
made during a simulation. This listing will also show which
components are changing status during the iterations. This level of
detail is only useful when one is trying to debug a run that fails to
converge because a component’s status is cycling.</p>
<p>Energy Section</p>
<p>The Energy Section of the output report lists overall energy
consumption and cost for each pump in the network. The items listed
for each pump include:</p>
</div></blockquote>
<ul class="simple">
<li>Percent Utilization (percent of the time that the pump is on-line)</li>
<li>Average Efficiency</li>
<li>Kilowatt-hours consumed per million gallons (or cubic meters) pumped</li>
<li>Average Kilowatts consumed</li>
<li>Peak Kilowatts used</li>
<li>Average cost per day</li>
</ul>
<blockquote>
<div><p>Also listed is the total cost per day for pumping and the total
demand charge (cost based on the peak energy usage) incurred. To
include an Energy Section in the report the command <strong>ENERGY YES</strong>
must appear in the [REPORT] section of the input file.</p>
<p>******************************************************************</p>
</div></blockquote>
<ul class="simple">
<li>E P A N E T *</li>
<li>Hydraulic and Water Quality *</li>
<li>Analysis for Pipe Networks *</li>
<li>Version 2.0 *</li>
</ul>
<blockquote>
<div><p>******************************************************************
EPANET TUTORIAL</p>
<p>Input Data File ………………. tutorial.inp</p>
<p>Number of Junctions. 5</p>
<p>Number of Reservoirs. 1</p>
<p>Number of Tanks 1</p>
<p>Number of Pipes 6</p>
<p>Number of Pumps 1</p>
<p>Number of Valves 0</p>
<p>Headloss Formula ……………… Hazen-Williams</p>
<p>Hydraulic Timestep ……………. 1.00 hrs</p>
<p>Hydraulic Accuracy 0.001000</p>
<p>Maximum Trials 40</p>
<p>Quality Analysis ……………… Chlorine Water Quality Time Step
……….. 5.00 min Water Quality Tolerance ……….. 0.01 mg/L
Specific Gravity 1.00</p>
<p>Relative Kinematic Viscosity 1.00</p>
<p>Relative Chemical Diffusivity 1.00</p>
<p>Demand Multiplier 1.00</p>
<p>Total Duration ……………….. 24.00 hrs Reporting Criteria:</p>
<p>All Nodes All Links</p>
<p>Energy Usage:</p>
</div></blockquote>
<table border="1" class="docutils">
<colgroup>
<col width="17%" />
<col width="29%" />
<col width="19%" />
<col width="12%" />
<col width="12%" />
<col width="12%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">&#160;</th>
<th class="head">Usage Avg.</th>
<th class="head">Kw-hr</th>
<th class="head">Avg.</th>
<th class="head">Peak</th>
<th class="head">Cost</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td>Pump</td>
<td>Factor Effic.</td>
<td>/Mgal</td>
<td>Kw</td>
<td>Kw</td>
<td>/day</td>
</tr>
</tbody>
</table>
<blockquote>
<div><p>—————————————————————- 7
100.00 75.00 746.34 51.34 51.59 0.00</p>
<p>Demand Charge: 0.00</p>
<p>Total Cost: 0.00</p>
<p><strong>Figure C.2</strong> Excerpt from a Report File (continued on next page)</p>
<p>Node Results at 0:00 hrs:</p>
<p>Demand Head Pressure Chlorine</p>
<p>Node gpm ft psi mg/L</p>
<p>——————————————————– 2 0.00
893.37 387.10 0.00</p>
<p>3 325.00 879.78 73.56 0.00</p>
<p>4 75.00 874.43 75.58 0.00</p>
<p>5 100.00 872.69 76.99 0.00</p>
<p>6 75.00 872.71 74.84 0.00</p>
<p>1 -1048.52 700.00 0.00 1.00 Reservoir</p>
<p>7 473.52 855.00 2.17 0.00 Tank</p>
<p>Link Results at 0:00 hrs:</p>
</div></blockquote>
<p>Flow Velocity Headloss</p>
<blockquote>
<div><p>Link gpm fps /1000ft</p>
<p>———————————————- 1 1048.52 2.97 4.53</p>
<p>2 558.33 1.58 1.41</p>
<p>3 165.19 1.05 1.07</p>
<p>4 90.19 0.58 0.35</p>
<p>5 -9.81 0.06 0.01</p>
<p>6 473.52 1.93 2.53</p>
<p>7 1048.52 0.00 -193.37 Pump</p>
<p>Node Results at 1:00 hrs:</p>
<p>Demand Head Pressure Chlorine</p>
<p>Node gpm ft psi mg/L</p>
<p>——————————————————– 2 0.00
893.92 387.34 1.00</p>
<p>3 325.00 880.42 73.84 0.99</p>
<p>4 75.00 875.12 75.88 0.00</p>
<p>5 100.00 873.40 77.30 0.00</p>
<p>6 75.00 873.43 75.15 0.00</p>
<p>1 -1044.60 700.00 0.00 1.00 Reservoir</p>
<p>7 469.60 855.99 2.59 0.00 Tank</p>
<p>Link Results at 1:00 hrs:</p>
</div></blockquote>
<p>Flow Velocity Headloss</p>
<table border="1" class="docutils">
<colgroup>
<col width="25%" />
<col width="25%" />
<col width="25%" />
<col width="25%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">Link</th>
<th class="head">gpm</th>
<th class="head">fps</th>
<th class="head">/1000ft</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td><blockquote class="first last">
<div></div></blockquote>
</td>
<td>&#160;</td>
<td>&#160;</td>
<td>&#160;</td>
</tr>
<tr class="row-odd"><td>1</td>
<td>1044.60</td>
<td>2.96</td>
<td>4.50</td>
</tr>
<tr class="row-even"><td>2</td>
<td>555.14</td>
<td>1.57</td>
<td>1.40</td>
</tr>
<tr class="row-odd"><td>3</td>
<td>164.45</td>
<td>1.05</td>
<td>1.06</td>
</tr>
<tr class="row-even"><td>4</td>
<td>89.45</td>
<td>0.57</td>
<td>0.34</td>
</tr>
<tr class="row-odd"><td>5</td>
<td>-10.55</td>
<td>0.07</td>
<td>0.01</td>
</tr>
<tr class="row-even"><td>6</td>
<td>469.60</td>
<td>1.92</td>
<td>2.49</td>
</tr>
<tr class="row-odd"><td>7</td>
<td>1044.60</td>
<td>0.00</td>
<td>-193.92 Pump</td>
</tr>
</tbody>
</table>
<blockquote>
<div><p><strong>Figure C.2</strong> Excerpt from a Report File (continued from previous
page)</p>
<p>Nodes Section</p>
<p>The Nodes Section of the output report lists simulation results for
those nodes and parameters identified in the [REPORT] section of the
input file. Results are listed for each reporting time step of an
extended period simulation. The reporting time step is specified in
the [TIMES] section of the input file. Results at intermediate times
when certain hydraulic events occur, such as pumps turning on or off
or tanks closing because they become empty or full, are not reported.</p>
<p>To have nodal results reported the [REPORT] section of the input file
must contain the keyword <strong>NODES</strong> followed by a listing of the ID
labels of the nodes to be included in the report. There can be
several such <strong>NODES</strong> lines in the file. To report results for all
nodes use the command <strong>NODES ALL</strong>.</p>
<p>The default set of reported quantities for nodes includes Demand,
Head, Pressure, and Water Quality. You can specify how many decimal
places to use when listing results for a parameter by using commands
such as <strong>PRESSURE PRECISION 3</strong> in the input file (i.e., use 3
decimal places when reporting results for pressure). The default
precision is 2 decimal places for all quantities. You can filter the
report to list only the occurrences of values below or above a
certain value by adding statements of the form <strong>PRESSURE BELOW 20</strong>
to the input file.</p>
<p>Links Section</p>
<p>The Links Section of the output report lists simulation results for
those links and parameters identified in the [REPORT] section of the
input file. The reporting times follow the same convention as was
described for nodes in the previous section.</p>
<p>As with nodes, to have any results for links reported you must
include the keyword <strong>LINKS</strong> followed by a list of link ID labels in
the [REPORT] section of the input file. Use the command <strong>LINKS ALL</strong>
to report results for all links.</p>
<p>The default parameters reported on for links includes Flow, Velocity,
and Headloss. Diameter, Length, Water Quality, Status, Setting,
Reaction Rate, and Friction Factor can be added to these by using
commands such as <strong>DIAMETER YES</strong> or <strong>DIAMETER PRECISION 0</strong>. The
same conventions used with node parameters for specifying reporting
precision and filters also applies to links.</p>
</div></blockquote>
</div>
<div class="section" id="binary-output-file-format">
<h2>Binary Output File Format<a class="headerlink" href="#binary-output-file-format" title="Permalink to this headline">¶</a></h2>
<blockquote>
<div><p>If a third file name is supplied to the command line that runs EPANET
then the results for all parameters for all nodes and links for all
reporting time periods will be saved to this file in a special binary
format. This file can be used for special post- processing purposes.
Data written to the file are 4-byte integers, 4-byte floats, or
fixed-size strings whose size is a multiple of 4 bytes. This allows
the file to be divided conveniently into 4-byte records. The file
consists of four sections of the following sizes in bytes:</p>
<p><em>Section Size in bytes</em></p>
<p>Prolog 852 + 20*Nnodes + 36*Nlinks + 8*Ntanks</p>
<p>Energy Use 28*Npumps + 4</p>
<p>Extended Period (16*Nnodes + 32*Nlinks)*Nperiods Epilog 28</p>
<p>where</p>
<p>Nnodes = number of nodes (junctions + reservoirs + tanks) Nlinks =
number of links (pipes + pumps + valves) Ntanks = number of tanks and
reservoirs</p>
<p>Npumps = number of pumps</p>
<p>Nperiods = number of reporting periods</p>
<p>and all of these counts are themselves written to the file’s Prolog
or Epilog sections.</p>
<p>Prolog Section</p>
<p>The prolog section of the binary Output File contains the following
data:</p>
</div></blockquote>
<table border="1" class="docutils">
<colgroup>
<col width="33%" />
<col width="33%" />
<col width="33%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head"><strong>Item</strong></th>
<th class="head"><strong>Type</strong></th>
<th class="head"><strong>Number of
Bytes</strong></th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td>Magic Number ( =
516114521)</td>
<td>Integer</td>
<td>4</td>
</tr>
<tr class="row-odd"><td>Version (= 200)</td>
<td>Integer</td>
<td>4</td>
</tr>
<tr class="row-even"><td><p class="first">Number of Nodes</p>
<p class="last">(Junctions +
Reservoirs + Tanks)</p>
</td>
<td>Integer</td>
<td>4</td>
</tr>
<tr class="row-odd"><td>Number of Reservoirs
&amp; Tanks</td>
<td>Integer</td>
<td>4</td>
</tr>
<tr class="row-even"><td><p class="first">Number of Links</p>
<p class="last">(Pipes + Pumps +
Valves)</p>
</td>
<td>Integer</td>
<td>4</td>
</tr>
<tr class="row-odd"><td>Number of Pumps</td>
<td>Integer</td>
<td>4</td>
</tr>
<tr class="row-even"><td>Number of Valves</td>
<td>Integer</td>
<td>4</td>
</tr>
<tr class="row-odd"><td><p class="first">Water Quality
Option 0 = none</p>
<p>1 = chemical</p>
<p>2 = age</p>
<p class="last">3 = source trace</p>
</td>
<td>Integer</td>
<td>4</td>
</tr>
<tr class="row-even"><td>Index of Node for
Source Tracing</td>
<td>Integer</td>
<td>4</td>
</tr>
<tr class="row-odd"><td><p class="first">Flow Units Option
0 = cfs</p>
<p>1 = gpm</p>
<p>2 = mgd</p>
<p>3 = Imperial mgd 4
= acre-ft/day</p>
<p>5 = liters/second</p>
<p>6 = liters/minute</p>
<p>7 = megaliters/day</p>
<p class="last">8 = cubic
meters/hour 9 =
cubic meters/day</p>
</td>
<td>Integer</td>
<td>4</td>
</tr>
</tbody>
</table>
<table border="1" class="docutils">
<colgroup>
<col width="33%" />
<col width="33%" />
<col width="33%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head"><p class="first">Pressure Units
Option 0 = psi</p>
<p>1 = meters</p>
<p class="last">2 = kPa</p>
</th>
<th class="head">Integer</th>
<th class="head">4</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td><p class="first">Statistics Flag</p>
<blockquote class="last">
<div><p>0 = no statistical
processing 1 =
results are
time-averaged</p>
<p>2 = only minimum
values reported</p>
<p>3 = only maximum
values reported 4
= only ranges
reported</p>
</div></blockquote>
</td>
<td>Integer</td>
<td>4</td>
</tr>
<tr class="row-odd"><td>Reporting Start Time
(seconds)</td>
<td>Integer</td>
<td>4</td>
</tr>
<tr class="row-even"><td>Reporting Time Step
(seconds)</td>
<td>Integer</td>
<td>4</td>
</tr>
<tr class="row-odd"><td>Simulation Duration
(seconds)</td>
<td>Integer</td>
<td>4</td>
</tr>
<tr class="row-even"><td>Problem Title (1st
line)</td>
<td>Char</td>
<td>80</td>
</tr>
<tr class="row-odd"><td>Problem Title (2nd
line)</td>
<td>Char</td>
<td>80</td>
</tr>
<tr class="row-even"><td>Problem Title (3rd
line)</td>
<td>Char</td>
<td>80</td>
</tr>
<tr class="row-odd"><td>Name of Input File</td>
<td>Char</td>
<td>260</td>
</tr>
<tr class="row-even"><td>Name of Report File</td>
<td>Char</td>
<td>260</td>
</tr>
<tr class="row-odd"><td>Name of Chemical</td>
<td>Char</td>
<td>16</td>
</tr>
<tr class="row-even"><td>Chemical
Concentration Units</td>
<td>Char</td>
<td>16</td>
</tr>
<tr class="row-odd"><td>ID Label of Each Node</td>
<td>Char</td>
<td>16</td>
</tr>
<tr class="row-even"><td>ID Label of Each Link</td>
<td>Char</td>
<td>16</td>
</tr>
<tr class="row-odd"><td>Index of Start Node
of Each Link</td>
<td>Integer</td>
<td>4*Nlinks</td>
</tr>
<tr class="row-even"><td>Index of End Node of
Each Link</td>
<td>Integer</td>
<td>4*Nlinks</td>
</tr>
<tr class="row-odd"><td><p class="first">Type Code of Each
Link 0 = Pipe with
CV</p>
<p>1 = Pipe</p>
<p>2 = Pump</p>
<p>3 = PRV</p>
<p>4 = PSV</p>
<p>5 = PBV</p>
<p>6 = FCV</p>
<p>7 = TCV</p>
<p class="last">8 = GPV</p>
</td>
<td>Integer</td>
<td>4*Nlinks</td>
</tr>
<tr class="row-even"><td>Node Index of Each
Tank</td>
<td>Integer</td>
<td>4*Ntanks</td>
</tr>
<tr class="row-odd"><td>Cross-Sectional Area
of Each Tank</td>
<td>Float</td>
<td>4*Ntanks</td>
</tr>
<tr class="row-even"><td>Elevation of Each
Node</td>
<td>Float</td>
<td>4*Nnodes</td>
</tr>
<tr class="row-odd"><td>Length of Each Link</td>
<td>Float</td>
<td>4*Nlinks</td>
</tr>
<tr class="row-even"><td>Diameter of Each Link</td>
<td>Float</td>
<td>4*Nlinks</td>
</tr>
</tbody>
</table>
<blockquote>
<div><p>There is a one-to-one correspondence between the order in which the
ID labels for nodes and links are written to the file and the index
numbers of these components. Also, reservoirs are distinguished from
tanks by having their cross-sectional area set to zero.</p>
<p>Energy Use Section</p>
<p>The Energy Use section of the binary output file immediately follows
the Prolog section. It contains the following data:</p>
</div></blockquote>
<table border="1" class="docutils">
<colgroup>
<col width="33%" />
<col width="33%" />
<col width="33%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head"><strong>Item</strong></th>
<th class="head"><strong>Type</strong></th>
<th class="head"><strong>Number of
Bytes</strong></th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td>Repeated for each
pump:</td>
<td>&#160;</td>
<td>&#160;</td>
</tr>
<tr class="row-odd"><td><ul class="first last simple">
<li>Pump Index in List
of Links</li>
</ul>
</td>
<td>Float</td>
<td>4</td>
</tr>
<tr class="row-even"><td><ul class="first last simple">
<li>Pump Utilization
(%)</li>
</ul>
</td>
<td>Float</td>
<td>4</td>
</tr>
<tr class="row-odd"><td><ul class="first last simple">
<li>Average Efficiency
(%)</li>
<li>Average
Kwatts/Million
Gallons
(/Meter:sup:<cite>3</cite>)</li>
</ul>
</td>
<td>Float Float</td>
<td><p class="first">4</p>
<p class="last">4</p>
</td>
</tr>
<tr class="row-even"><td><ul class="first last simple">
<li>Average Kwatts</li>
</ul>
</td>
<td>Float</td>
<td>4</td>
</tr>
<tr class="row-odd"><td><ul class="first last simple">
<li>Peak Kwatts</li>
</ul>
</td>
<td>Float</td>
<td>4</td>
</tr>
<tr class="row-even"><td><ul class="first last simple">
<li>Average Cost Per
Day</li>
</ul>
</td>
<td>Float</td>
<td>4</td>
</tr>
<tr class="row-odd"><td>Overall Peak Energy
Usage</td>
<td>Float</td>
<td>4</td>
</tr>
</tbody>
</table>
<blockquote>
<div><p>The statistics reported in this section refer to the period of time
between the start of the output reporting period and the end of the
simulation.</p>
<p>Extended Period Section</p>
<p>The Extended Period section of the binary Output File contains
simulation results for each reporting period of an analysis (the
reporting start time and time step are written to the Output File’s
Prolog section and the number of steps is written to the Epilog
section). For each reporting period the following values are written
to the file:</p>
</div></blockquote>
<table border="1" class="docutils">
<colgroup>
<col width="33%" />
<col width="33%" />
<col width="33%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head"><strong>Item</strong></th>
<th class="head"><strong>Type</strong></th>
<th class="head"><strong>Size in Bytes</strong></th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td>Demand at Each Node</td>
<td>Float</td>
<td>4*Nnodes</td>
</tr>
<tr class="row-odd"><td>Hydraulic Head at
Each Node</td>
<td>Float</td>
<td>4*Nnodes</td>
</tr>
<tr class="row-even"><td>Pressure at Each Node</td>
<td>Float</td>
<td>4*Nnodes</td>
</tr>
<tr class="row-odd"><td>Water Quality at Each
Node</td>
<td>Float</td>
<td>4*Nnodes</td>
</tr>
<tr class="row-even"><td><p class="first">Flow in Each Link</p>
<p class="last">(negative for reverse
flow)</p>
</td>
<td>Float</td>
<td>4*Nlinks</td>
</tr>
<tr class="row-odd"><td>Velocity in Each Link</td>
<td>Float</td>
<td>4*Nlinks</td>
</tr>
<tr class="row-even"><td><p class="first">Headloss per 1000
Units of Length for
Each Link (Negative
of head gain for
pumps and total head</p>
<p class="last">loss for valves)</p>
</td>
<td>Float</td>
<td>4*Nlinks</td>
</tr>
<tr class="row-odd"><td>Average Water Quality
in Each Link</td>
<td>Float</td>
<td>4*Nlinks</td>
</tr>
<tr class="row-even"><td><p class="first">Status Code for Each
Link</p>
<blockquote class="last">
<div><p>0 = closed (max.
head exceeded) 1 =
temporarily closed</p>
<p>2 = closed</p>
<p>3 = open</p>
<p>4 = active
(partially open)</p>
<p>5 = open (max.
flow exceeded) 6 =
open (flow setting
not met)</p>
<p>7 = open (pressure
setting not met)</p>
</div></blockquote>
</td>
<td>Float</td>
<td>4*Nlinks</td>
</tr>
<tr class="row-odd"><td><p class="first">Setting for Each
Link:</p>
<blockquote class="last">
<div><p>Roughness
Coefficient for
Pipes Speed for
Pumps</p>
<p>Setting for Valves</p>
</div></blockquote>
</td>
<td>Float</td>
<td>4*Nlinks</td>
</tr>
<tr class="row-even"><td>Reaction Rate for
Each Link
(mass/L/day)</td>
<td>Float</td>
<td>4*Nlinks</td>
</tr>
<tr class="row-odd"><td>Friction Factor for
Each Link</td>
<td>Float</td>
<td>4*Nlinks</td>
</tr>
</tbody>
</table>
<blockquote>
<div><p>Epilog Section</p>
<p>The Epilog section of the binary output file contains the following
data:</p>
</div></blockquote>
<table border="1" class="docutils">
<colgroup>
<col width="51%" />
<col width="17%" />
<col width="32%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head"><strong>Item</strong></th>
<th class="head"><strong>Type</strong></th>
<th class="head"><strong>Number of Bytes</strong></th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td>Average bulk reaction rate (mass/hr)</td>
<td>Float</td>
<td>4</td>
</tr>
<tr class="row-odd"><td>Average wall reaction rate (mass/hr)</td>
<td>Float</td>
<td>4</td>
</tr>
<tr class="row-even"><td>Average tank reaction rate (mass/hr)</td>
<td>Float</td>
<td>4</td>
</tr>
<tr class="row-odd"><td>Average source inflow rate (mass/hr)</td>
<td>Float</td>
<td>4</td>
</tr>
<tr class="row-even"><td>Number of Reporting Periods</td>
<td>Integer</td>
<td>4</td>
</tr>
<tr class="row-odd"><td><p class="first">Warning Flag:</p>
<blockquote class="last">
<div><p>0 = no warnings</p>
<p>1 = warnings were generated</p>
</div></blockquote>
</td>
<td>Integer</td>
<td>4</td>
</tr>
<tr class="row-even"><td>Magic Number ( = 516114521)</td>
<td>Integer</td>
<td>4</td>
</tr>
</tbody>
</table>
<blockquote>
<div><p>The mass units of the reaction rates both here and in the Extended
Period output depend on the concentration units assigned to the
chemical being modeled. The reaction rates listed in this section
refer to the average of the rates seen in all pipes (or all tanks)
over the entire reporting period of the simulation.</p>
<p>(This page intentionally left blank.)</p>
</div></blockquote>
</div>
</div>
<div class="section" id="d-analysis-algorithms">
<h1>D. ANALYSIS ALGORITHMS<a class="headerlink" href="#d-analysis-algorithms" title="Permalink to this headline">¶</a></h1>
<div class="section" id="hydraulics">
<h2>Hydraulics<a class="headerlink" href="#hydraulics" title="Permalink to this headline">¶</a></h2>
<blockquote>
<div><p>The method used in EPANET to solve the flow continuity and headloss
equations that characterize the hydraulic state of the pipe network
at a given point in time can be termed a hybrid node-loop approach.
Todini and Pilati (1987) and later Salgado et al. (1988) chose to
call it the “Gradient Method”. Similar approaches have been described
by Hamam and Brameller (1971) (the “Hybrid Method) and by Osiadacz
(1987) (the “Newton Loop-Node Method”). The only difference between
these methods is the way in which link flows are updated after a new
trial solution for nodal heads has been found. Because Todini’s
approach is simpler, it was chosen for use in EPANET.</p>
<p>Assume we have a pipe network with N junction nodes and NF fixed
grade nodes (tanks and reservoirs). Let the flow-headloss relation in
a pipe between nodes i and j be given as:</p>
<p><em>H</em> − <em>H</em> = <em>h</em> = <em>rQ n</em> + <em>mQ</em> 2</p>
<p>D.1</p>
<p><em>i j ij ij ij</em></p>
<p>where <em>H</em> = nodal head, <em>h</em> = headloss, <em>r</em> = resistance coefficient,
<em>Q</em> = flow rate, <em>n</em> = flow exponent, and <em>m</em> = minor loss
coefficient. The value of the resistance coefficient will depend on
which friction headloss formula is being used (see below). For pumps,
the headloss (negative of the head gain) can be represented by a
power law of the form</p>
</div></blockquote>
<p><em>hij</em></p>
<blockquote>
<div>= −<em>ψ</em> 2 (<em>h</em></div></blockquote>
<ul>
<li><ul class="first simple">
<li></li>
</ul>
<p>r* (<em>Qij</em></p>
</li>
</ul>
<blockquote>
<div><p>/ <em>ψ</em> ) <em>n</em> )</p>
<p>where <em>h0</em> is the shutoff head for the pump, ω is a relative speed
setting, and r and n are the pump curve coefficients. The second set
of equations that must be satisfied is flow continuity around all
nodes:</p>
<p>∑<em>Qij</em> − <em>Di</em> = 0</p>
<p><em>j</em></p>
<p>for i = 1,… N. D.2</p>
<p>where <em>Di</em> is the flow demand at node i and by convention, flow
into a node is positive. For a set of known heads at the fixed grade
nodes, we seek a solution for all heads <em>Hi</em> and flows <em>Qij</em> that
satisfy Eqs. (D.1) and (D.2).</p>
<p>The Gradient solution method begins with an initial estimate of flows
in each pipe that may not necessarily satisfy flow continuity. At
each iteration of the method, new nodal heads are found by solving
the matrix equation:</p>
</div></blockquote>
<p><strong>AH</strong> = <strong>F</strong></p>
<blockquote>
<div><p>D.3</p>
<p>where <strong>A</strong> = an (NxN) Jacobian matrix, <strong>H</strong> = an (Nx1) vector of
unknown nodal heads, and <strong>F</strong> = an (Nx1) vector of right hand side
terms</p>
<p>The diagonal elements of the Jacobian matrix are:</p>
</div></blockquote>
<p><em>Aii</em></p>
<blockquote>
<div>= ∑ <em>pij</em></div></blockquote>
<p><em>j</em></p>
<blockquote>
<div>while the non-zero, off-diagonal terms are:</div></blockquote>
<p><em>Aij</em></p>
<blockquote>
<div><p>= − <em>pij</em></p>
<p>where <em>pij</em> is the inverse derivative of the headloss in the link
between nodes i and j with respect to flow. For pipes,</p>
</div></blockquote>
<p><em>pij</em></p>
<blockquote>
<div><p>=</p>
<p><em>nr Qij</em></p>
<p>1</p>
<p><em>n</em>−1 + 2<em>m Q</em></p>
<p>while for pumps</p>
</div></blockquote>
<p><em>pij</em></p>
<blockquote>
<div><p>= 1</p>
<p><em>nψ</em> 2 <em>r</em>(<em>Q</em></p>
<p>/ <em>ψ</em> )<em>n</em>−1</p>
<p>Each right hand side term consists of the net flow imbalance at a
node plus a flow correction factor:</p>
<p> </p>
<p><em>Fi</em> =  ∑<em>Qij</em> − <em>Di</em>  + ∑ <em>yij</em> + ∑ <em>pif H f</em></p>
<p> <em>j</em>  <em>j f</em></p>
<p>where the last term applies to any links connecting node i to a fixed
grade node f and the flow correction factor <em>yij</em> is:</p>
</div></blockquote>
<p><em>yij</em></p>
<blockquote>
<div><p>= <em>p</em> (<em>r Q n</em> + <em>m Q</em> 2 )sgn(<em>Q</em> )</p>
<p>for pipes and</p>
</div></blockquote>
<p><em>yij</em></p>
<blockquote>
<div><p>= − <em>p ψ</em> 2 (<em>h</em> − <em>r</em>(<em>Q</em> / <em>ψ</em> ) <em>n</em> )</p>
<p>for pumps, where sgn(x) is 1 if x &gt; 0 and -1 otherwise. (<em>Qij</em> is
always positive for pumps.)</p>
<p>After new heads are computed by solving Eq. (D.3), new flows are
found from:</p>
</div></blockquote>
<p><em>Qij</em></p>
<blockquote>
<div><p>= <em>Q</em> − (<em>y</em> − <em>p</em> (<em>H</em> − <em>H</em> ))</p>
<p>D.4</p>
<p>If the sum of absolute flow changes relative to the total flow in all
links is larger than some tolerance (e.g., 0.001), then Eqs. (D.3)
and (D.4) are solved once again. The flow update formula (D.4) always
results in flow continuity around each node after the first
iteration.</p>
<p>EPANET implements this method using the following steps:</p>
</div></blockquote>
<ol class="arabic simple">
<li>The linear system of equations D.3 is solved using a sparse matrix
method based on node re-ordering (George and Liu, 1981). After re-
ordering the nodes to minimize the amount of fill-in for matrix A, a
symbolic factorization is carried out so that only the non-zero
elements of A need be stored and operated on in memory. For extended
period simulation this re-ordering and factorization is only carried
out once at the start of the analysis.</li>
<li>For the very first iteration, the flow in a pipe is chosen equal to
the flow corresponding to a velocity of 1 ft/sec, while the flow
through a pump equals the design flow specified for the pump. (All
computations are made with head in feet and flow in cfs).</li>
<li>The resistance coefficient for a pipe (<em>r</em>) is computed as described
in Table 3.1. For the Darcy-Weisbach headloss equation, the friction
factor <em>f</em> is computed by different equations depending on the flow’s
Reynolds Number (Re):</li>
</ol>
<blockquote>
<div><p>Hagen – Poiseuille formula for Re &lt; 2,000 (Bhave, 1991):</p>
<p><em>f</em> = 64</p>
</div></blockquote>
<div class="section" id="re">
<h3>Re<a class="headerlink" href="#re" title="Permalink to this headline">¶</a></h3>
<blockquote>
<div>Swamee and Jain approximation to the Colebrook - White equation for
Re &gt; 4,000 (Bhave, 1991):</div></blockquote>
<p><em>f</em> =</p>
</div>
<div class="section" id="id1">
<h3>  <em>σ</em><a class="headerlink" href="#id1" title="Permalink to this headline">¶</a></h3>
<blockquote>
<div>0.25</div></blockquote>
<p>5.74  2</p>
<blockquote>
<div><em>Ln</em> 3.7<em>d</em> + Re0.9 </div></blockquote>
</div>
<div class="section" id="id2">
<h3>  <a class="headerlink" href="#id2" title="Permalink to this headline">¶</a></h3>
<blockquote>
<div><p>Cubic Interpolation From Moody Diagram for 2,000 &lt; Re &lt; 4,000
(Dunlop, 1991):</p>
<p><em>f</em> = ( <em>X</em>1 + <em>R</em>( <em>X</em> 2 + <em>R</em>( <em>X</em> 3 + <em>X</em> 4)))</p>
</div></blockquote>
</div>
<div class="section" id="r-re-2000">
<h3><em>R</em> = Re 2000<a class="headerlink" href="#r-re-2000" title="Permalink to this headline">¶</a></h3>
<blockquote>
<div><p><em>X</em> 1 = 7<em>FA</em> − <em>FB</em></p>
<p><em>X</em> 2 = 0.128 − 17<em>FA</em> + 2.5<em>FB X</em> 3 = −0.128 + 13<em>FA</em> −
2<em>FB</em></p>
<p><em>X</em> 4 = <em>R</em>(0.032 − 3<em>FA</em> + 0.5<em>FB</em>)</p>
<p><em>FA</em> = (<em>Y</em> 3)−2</p>
</div></blockquote>
</div>
<div class="section" id="section-1">
<span id="id3"></span><h3><a class="headerlink" href="#section-1" title="Permalink to this headline">¶</a></h3>
<blockquote>
<div><em>FB</em> = <em>FA</em> 2 −</div></blockquote>
</div>
<div class="section" id="section-2">
<span id="id4"></span><h3><a class="headerlink" href="#section-2" title="Permalink to this headline">¶</a></h3>
<blockquote>
<div><p>0.00514215 </p>
<p>(<em>Y</em> 2)(<em>Y</em> 3) </p>
</div></blockquote>
<p><em>Y</em> 2 =</p>
<blockquote>
<div><p><em>σ</em></p>
<p>3.7<em>d</em></p>
</div></blockquote>
<ul class="simple" id="section-3">
<li>5.74</li>
</ul>
<hr class="docutils" />
<blockquote>
<div><p>Re0.9</p>
<p><em>Y</em> 3 = −0.86859<em>Ln</em> <em>σ</em></p>
</div></blockquote>
<ul class="simple" id="section-4">
<li>5.74 </li>
</ul>
<hr class="docutils" />
<blockquote>
<div><p> 3.7<em>d</em> 40000.9 </p>
<p>where <em>σ</em> = pipe roughness and <em>d</em> = pipe diameter.</p>
</div></blockquote>
<ol class="arabic simple" start="4">
<li>The minor loss coefficient based on velocity head (<em>K</em>) is converted
to one based on flow (<em>m</em>) with the following relation:</li>
</ol>
<blockquote>
<div><p><em>m</em> = 0.02517<em>K</em></p>
<p><em>d</em> 4</p>
</div></blockquote>
<ol class="arabic simple" start="5">
<li>Emitters at junctions are modeled as a fictitious pipe between the
junction and a fictitious reservoir. The pipe’s headloss parameters
are <em>n</em> = (1/γ), <em>r</em> = (1/C):sup:<cite>n</cite>, and <em>m</em> = 0 where C is the
emitter’s discharge coefficient and γ is its pressure exponent. The
head at the fictitious reservoir is the elevation of the junction.
The computed flow through the fictitious pipe becomes the flow
associated with the emitter.</li>
<li>Open valves are assigned an <em>r</em>-value by assuming the open valve acts
as a smooth pipe (f = 0.02) whose length is twice the valve diameter.
Closed links are assumed to obey a linear headloss relation with a
large resistance factor, i.e., <em>h</em> = 10<sup>8</sup><em>Q</em>, so that <em>p</em> =
10<sup>-8</sup> and <em>y</em> = <em>Q</em>. For links where <em>(r+m)Q</em> &lt;
10<sup>-7</sup>, <em>p</em> = 10<sup>7</sup> and <em>y = Q/n</em>.</li>
<li>Status checks on pumps, check valves (CVs), flow control valves, and
pipes connected to full/empty tanks are made after every other
iteration, up until the 10th iteration. After this, status checks are
made only after convergence is achieved. Status checks on pressure
control valves (PRVs and PSVs) are made after each iteration.</li>
<li>During status checks, pumps are closed if the head gain is greater
than the shutoff head (to prevent reverse flow). Similarly, check
valves are closed if the headloss through them is negative (see
below). When these conditions are not present, the link is re-opened.
A similar status check is made for links connected to empty/full
tanks. Such links are closed if the difference in head across the
link would cause an empty tank to drain or a full tank to fill. They
are re- opened at the next status check if such conditions no longer
hold.</li>
<li>Simply checking if <em>h</em> &lt; 0 to determine if a check valve should be
closed or open was found to cause cycling between these two states in
some networks due to limits on numerical precision. The following
procedure was devised to provide a more robust test of the status of
a check valve (CV):</li>
</ol>
<blockquote>
<div><p>if |<em>h</em>| &gt; Htol then</p>
<p>if <em>h</em> &lt; -Htol then status = CLOSED if <em>Q</em> &lt; -Qtol then status =
CLOSED else status = OPEN</p>
<p>else</p>
<p>if <em>Q</em> &lt; -Qtol then status = CLOSED</p>
<p>else status = unchanged where Htol = 0.0005 ft and Qtol = 0.001 cfs.</p>
</div></blockquote>
<ol class="arabic simple" start="10">
<li>If the status check closes an open pump, pipe, or CV, its flow is
set to 10<sup>-6</sup> cfs. If a pump is re-opened, its flow is
computed by applying the current head gain to its characteristic
curve. If a pipe or CV is re- opened, its flow is determined by
solving Eq. (D.1) for <em>Q</em> under the current headloss <em>h</em>, ignoring
any minor losses.</li>
<li>Matrix coefficients for pressure breaker valves (PBVs) are set to
the following: <em>p</em> = 10<sup>8</sup> and <em>y</em> = 10<sup>8</sup>Hset,
where Hset is the pressure drop setting for the valve (in feet).
Throttle control valves (TCVs) are treated as pipes with <em>r</em> as
described in item 6 above and <em>m</em> taken as the converted value of
the valve setting (see item 4 above).</li>
<li>Matrix coefficients for pressure reducing, pressure sustaining, and
flow control valves (PRVs, PSVs, and FCVs) are computed after all
other links have been analyzed. Status checks on PRVs and PSVs are
made as described in item 7 above. These valves can either be
completely open, completely closed, or active at their pressure or
flow setting.</li>
<li>The logic used to test the status of a PRV is as follows:</li>
</ol>
<blockquote>
<div><p>If current status = ACTIVE then</p>
<p>if Q &lt; -Qtol then new status = CLOSED if Hi &lt; Hset + Hml – Htol then
new status = OPEN</p>
<p>else new status = ACTIVE</p>
<p>If curent status = OPEN then</p>
<p>if Q &lt; -Qtol then new status = CLOSED if Hi &gt; Hset + Hml + Htol then
new status = ACTIVE</p>
<p>else new status = OPEN</p>
<p>If current status = CLOSED then if Hi &gt; Hj + Htol</p>
<p>and Hi &lt; Hset – Htol then new status = OPEN if Hi &gt; Hj + Htol</p>
<p>and Hj &lt; Hset - Htol then new status = ACTIVE</p>
<p>else new status = CLOSED</p>
<p>where Q is the current flow through the valve, Hi is its upstream
head, Hj is its downstream head, Hset is its pressure setting
converted to head, Hml is the minor loss when the valve is open (=
mQ<sup>2</sup>), and Htol and Qtol are the same values used for check
valves in</p>
<p>item 9 above. A similar set of tests is used for PSVs, except that
when testing against Hset, the i and j subscripts are switched as are
the &gt; and &lt; operators.</p>
</div></blockquote>
<ol class="arabic simple" start="14">
<li>Flow through an active PRV is maintained to force continuity at its
downstream node while flow through a PSV does the same at its
upstream node. For an active PRV from node i to j:</li>
</ol>
<blockquote>
<div><p><em>pij</em> = 0</p>
<p><em>Fj</em> = <em>Fj</em> + 10<sup>8</sup>Hset</p>
<p><em>Ajj</em> = <em>Ajj</em> + 10<sup>8</sup></p>
<p>This forces the head at the downstream node to be at the valve
setting Hset. An equivalent assignment of coefficients is made for an
active PSV except the subscript for F and A is the upstream node i.
Coefficients for open/closed PRVs and PSVs are handled in the same
way as for pipes.</p>
</div></blockquote>
<ol class="arabic simple" start="15">
<li>For an active FCV from node i to j with flow setting Qset, Qset is
added to the flow leaving node i and entering node j, and is
subtracted from <em>Fi</em> and added to <em>Fj</em>. If the head at node i is
less than that at node j, then the valve cannot deliver the flow and
it is treated as an open pipe.</li>
<li>After initial convergence is achieved (flow convergence plus no
change in status for PRVs and PSVs), another status check on pumps,
CVs, FCVs, and links to tanks is made. Also, the status of links
controlled by pressure switches (e.g., a pump controlled by the
pressure at a junction node) is checked. If any status change
occurs, the iterations must continue for at least two more
iterations (i.e., a convergence check is skipped on the very next
iteration). Otherwise, a final solution has been obtained.</li>
<li>For extended period simulation (EPS), the following procedure is
implemented:<ol class="loweralpha">
<li>After a solution is found for the current time period, the time
step for the next solution is the minimum of:<ul>
<li>the time until a new demand period begins,</li>
<li>the shortest time for a tank to fill or drain,</li>
<li>the shortest time until a tank level reaches a point that
triggers a change in status for some link (e.g., opens or
closes a pump) as stipulated in a simple control,</li>
<li>the next time until a simple timer control on a link kicks in,</li>
<li>the next time at which a rule-based control causes a status
change somewhere in the network.</li>
</ul>
</li>
</ol>
</li>
</ol>
<blockquote>
<div>In computing the times based on tank levels, the latter are assumed
to change in a linear fashion based on the current flow solution. The
activation time of rule-based controls is computed as follows:</div></blockquote>
<ul class="simple">
<li>Starting at the current time, rules are evaluated at a rule time
step. Its default value is 1/10 of the normal hydraulic time step
(e.g., if hydraulics are updated every hour, then rules are evaluated
every 6 minutes).</li>
<li>Over this rule time step, clock time is updated, as are the water
levels in storage tanks (based on the last set of pipe flows
computed).</li>
<li>If a rule’s conditions are satisfied, then its actions are added to a
list. If an action conflicts with one for the same link already on
the list then the action from the rule with the higher priority stays
on the list and the other is removed. If the priorities are the same
then the original action stays on the list.</li>
<li>After all rules are evaluated, if the list is not empty then the new
actions are taken. If this causes the status of one or more links to
change then a new hydraulic solution is computed and the process
begins anew.</li>
<li>If no status changes were called for, the action list is cleared and
the next rule time step is taken unless the normal hydraulic time
step has elapsed.</li>
</ul>
<ol class="loweralpha simple" start="2">
<li>Time is advanced by the computed time step, new demands are found,
tank levels are adjusted based on the current flow solution, and link
control rules are checked to determine which links change status.</li>
<li>A new set of iterations with Eqs. (D.3) and (D.4) are begun at the
current set of flows.</li>
</ol>
</div>
</div>
<div class="section" id="water-quality">
<h2>Water Quality<a class="headerlink" href="#water-quality" title="Permalink to this headline">¶</a></h2>
<blockquote>
<div><p>The governing equations for EPANET’s water quality solver are based
on the principles of conservation of mass coupled with reaction
kinetics. The following phenomena are represented (Rossman et al.,
1993; Rossman and Boulos, 1996):</p>
<p>Advective Transport in Pipes</p>
<p>A dissolved substance will travel down the length of a pipe with the
same average velocity as the carrier fluid while at the same time
reacting (either growing or decaying) at some given rate.
Longitudinal dispersion is usually not an important transport
mechanism under most operating conditions. This means there is no
intermixing of mass between adjacent parcels of water traveling down
a pipe. Advective transport within a pipe is represented with the
following equation:</p>
<p>∂ <em>Ci = - u</em> ∂ <em>Ci + r( C )</em> D.5</p>
<p>∂<em>t i</em> ∂<em>x i</em></p>
<p>where <em>Ci</em> = concentration (mass/volume) in pipe i as a function of
distance x and time t, <em>ui</em> = flow velocity (length/time) in pipe
i, and <em>r</em> = rate of reaction (mass/volume/time) as a function of
concentration.</p>
<p>Mixing at Pipe Junctions</p>
<p>At junctions receiving inflow from two or more pipes, the mixing of
fluid is taken to be complete and instantaneous. Thus the
concentration of a substance in water leaving the junction is simply
the flow-weighted sum of the concentrations from the inflowing pipes.
For a specific node k one can write:</p>
<p>∑ <em>jσ I Q j C j</em>|<em>x</em> = <em>L j</em></p>
<p><em>C =</em></p>
<p><em>+ Qk</em> ,<em>ext Ck</em> ,<em>ext</em></p>
<p>D.6</p>
</div></blockquote>
<p><em>i</em>|<em>x</em> = 0</p>
<p>∑ <em>jσ I k</em></p>
<p><em>Q j + Qk</em> ,<em>ext</em></p>
<blockquote>
<div><p>where i = link with flow leaving node k, <em>Ik</em> = set of links with
flow into k, <em>Lj</em> = length of link j, <em>Qj</em> = flow (volume/time)
in link j, <em>Qk,ext</em> = external source flow entering the network at
node k, and <em>Ck,ext</em> = concentration of the external flow entering
at node k. The notation <em>Ci|x=0</em> represents the concentration at
the start of link i, while <em>Ci|x=L</em> is the concentration at the end
of the link.</p>
<p>Mixing in Storage Facilities</p>
<p>It is convenient to assume that the contents of storage facilities
(tanks and reservoirs) are completely mixed. This is a reasonable
assumption for many tanks operating under fill-and-draw conditions
providing that sufficient momentum flux is imparted to the inflow
(Rossman and Grayman, 1999). Under completely mixed conditions the
concentration throughout the tank is a blend of the current contents
and that of any entering water. At the same time, the internal
concentration could be changing due to reactions. The following
equation expresses these phenomena:</p>
<p>∂(V s Cs )</p>
</div></blockquote>
<p>∂<em>t =</em></p>
<blockquote>
<div>∑<em>iσ I s</em></div></blockquote>
<p><em>Qi Ci</em>|<em>x</em> = <em>Li -</em></p>
<blockquote>
<div>∑ <em>jσ Os</em></div></blockquote>
<p><em>Q j Cs + r</em>(<em>Cs</em> ) D.7</p>
<blockquote>
<div><p>where <em>Vs</em> = volume in storage at time t, <em>Cs</em> = concentration
within the storage facility, <em>Is</em> = set of links providing flow
into the facility, and <em>Os</em> = set of links withdrawing flow from
the facility.</p>
<p>Bulk Flow Reactions</p>
<p>While a substance moves down a pipe or resides in storage it can
undergo reaction with constituents in the water column. The rate of
reaction can generally be described as a power function of
concentration:</p>
<p><em>r</em> = <em>kCn</em></p>
<p>where <em>k</em> = a reaction constant and <em>n</em> = the reaction order. When a
limiting concentration exists on the ultimate growth or loss of a
substance then the rate expression becomes</p>
<p><em>R</em> = <em>K</em> (<em>C</em> − <em>C</em>)<em>C</em> (<em>n</em>−1)</p>
<p><em>R</em> = <em>K</em> (<em>C</em> − <em>C</em> )<em>C</em> (<em>n</em>−1)</p>
<p>for <em>n</em> &gt; 0, <em>Kb</em> &gt; 0 for <em>n</em> &gt; 0, <em>Kb</em> &lt; 0</p>
<p>where <em>CL</em> = the limiting concentration.</p>
<p>Some examples of different reaction rate expressions are:</p>
</div></blockquote>
<ul class="simple">
<li><em>Simple First-Order Decay (CL = 0, Kb &lt; 0, n = 1)</em></li>
</ul>
<blockquote>
<div><p><em>R</em> = <em>Kb C</em></p>
<p>The decay of many substances, such as chlorine, can be modeled
adequately as a simple first-order reaction.</p>
</div></blockquote>
<ul class="simple">
<li><em>First-Order Saturation Growth (CL &gt; 0, Kb &gt; 0, n = 1):</em></li>
</ul>
<blockquote>
<div><p><em>R</em> = <em>Kb</em> (<em>CL</em> − <em>C</em>)</p>
<p>This model can be applied to the growth of disinfection by-products,
such as trihalomethanes, where the ultimate formation of by-product
(<em>CL</em>) is limited by the amount of reactive precursor present.</p>
</div></blockquote>
<ul class="simple">
<li><em>Two-Component, Second Order Decay (CL</em> ≠ <em>0, Kb &lt; 0, n = 2):</em></li>
</ul>
<blockquote>
<div><p><em>R</em> = <em>Kb C</em>(<em>C</em> − <em>CL</em> )</p>
<p>This model assumes that substance A reacts with substance B in some
unknown ratio to produce a product P. The rate of disappearance of A
is proportional to the product of A and B remaining. <em>CL</em> can be
either positive or negative, depending on whether either component A
or B is in excess, respectively. Clark (1998) has had success in
applying this model to chlorine decay data that did not conform to
the simple first-order model.</p>
</div></blockquote>
<ul class="simple">
<li><em>Michaelis-Menton Decay Kinetics (CL &gt; 0, Kb &lt; 0, n &lt; 0):</em></li>
</ul>
<blockquote>
<div><p><em>R</em> = <em>Kb C</em></p>
<p><em>CL</em> − <em>C</em></p>
<p>As a special case, when a negative reaction order <em>n</em> is specified,
EPANET will utilize the Michaelis-Menton rate equation, shown above
for a decay reaction. (For growth reactions the denominator becomes
<em>CL + C</em>.) This rate equation is often used to describe
enzyme-catalyzed reactions and microbial growth. It produces first-
order behavior at low concentrations and zero-order behavior at
higher concentrations. Note that for decay reactions, <em>CL</em> must be
set higher than the initial concentration present.</p>
<p>Koechling (1998) has applied Michaelis-Menton kinetics to model
chlorine decay in a number of different waters and found that both
<em>Kb</em> and <em>CL</em> could be related to the water’s organic content and
its ultraviolet absorbance as follows:</p>
<p><em>K</em> = −0.32<em>UVA</em>1.365 (100*UVA*)</p>
</div></blockquote>
<p><em>b DOC</em></p>
<blockquote>
<div><p><em>CL</em> = 4.98<em>UVA</em> − 1.91<em>DOC</em></p>
<p>where UVA = ultraviolet absorbance at 254 nm (1/cm) and DOC =
dissolved organic carbon concentration (mg/L).</p>
</div></blockquote>
</div>
<div class="section" id="note-these-expressions-apply-only-for-values-of-kb-and-cl-used-with-michaelis-menton-kinetics">
<h2>Note: These expressions apply only for values of <em>Kb</em> and <em>CL</em> used with Michaelis-Menton kinetics.<a class="headerlink" href="#note-these-expressions-apply-only-for-values-of-kb-and-cl-used-with-michaelis-menton-kinetics" title="Permalink to this headline">¶</a></h2>
<ul class="simple">
<li><em>Zero-Order growth (CL = 0, Kb = 1, n = 0) R = 1.0</em></li>
</ul>
<blockquote>
<div><p>This special case can be used to model water age, where with each
unit of time the “concentration” (i.e., age) increases by one unit.</p>
<p>The relationship between the bulk rate constant seen at one
temperature (T1) to that at another temperature (T2) is often
expressed using a van’t Hoff - Arrehnius equation of the form:</p>
</div></blockquote>
<p><em>Kb</em> 2</p>
<blockquote>
<div><p><em>T</em> 2−<em>T</em> 1</p>
<p><em>b</em>1</p>
<p>where θ is a constant. In one investigation for chlorine, θ was
estimated to be 1.1 when T1 was 20 deg. C (Koechling, 1998).</p>
<p>Pipe Wall Reactions</p>
<p>While flowing through pipes, dissolved substances can be transported
to the pipe wall and react with material such as corrosion products
or biofilm that are on or close to the wall. The amount of wall area
available for reaction and the rate of mass transfer between the bulk
fluid and the wall will also influence the overall rate of this
reaction. The surface area per unit volume, which for a pipe equals 2
divided by the radius, determines the former factor. The latter
factor can be represented by a mass transfer coefficient whose value
depends on the molecular diffusivity of the reactive species and on
the Reynolds number of the flow (Rossman et. al, 1994). For first-
order kinetics, the rate of a pipe wall reaction can be expressed as:</p>
<p><em>r</em> = 2<em>kw k f C</em></p>
<p><em>R</em>(<em>kw</em> + <em>k f</em> )</p>
<p>where <em>kw</em> = wall reaction rate constant (length/time), <em>kf</em> =
mass transfer coefficient (length/time), and R = pipe radius. For
zero-order kinetics the reaction rate cannot be any higher than the
rate of mass transfer, so</p>
<p><em>r</em> = <em>MIN</em> (<em>kw</em> , <em>k f C</em>)(2 / <em>R</em>)</p>
<p>where <em>kw</em> now has units of mass/area/time.</p>
<p>Mass transfer coefficients are usually expressed in terms of a
dimensionless Sherwood number (<em>Sh</em>):</p>
</div></blockquote>
<p><em>k</em> = <em>Sh D</em></p>
<p><em>f d</em></p>
<blockquote>
<div><p>in which <em>D</em> = the molecular diffusivity of the species being
transported (length:sup:<cite>2</cite>/time) and <em>d</em> = pipe diameter. In fully
developed laminar flow, the average Sherwood number along the length
of a pipe can be expressed as</p>
<p><em>Sh</em> = 3.65 +</p>
</div></blockquote>
<p>0.0668(<em>d</em> / <em>L</em>) Re <em>Sc</em></p>
<p>1 + 0.04[(<em>d</em> / <em>L</em>) Re <em>Sc</em>]2 / 3</p>
<blockquote>
<div><p>in which <em>Re</em> = Reynolds number and <em>Sc</em> = Schmidt number (kinematic
viscosity of water divided by the diffusivity of the chemical)
(Edwards et.al, 1976). For turbulent flow the empirical correlation
of Notter and Sleicher (1971) can be used:</p>
<p><em>Sh</em> = 0.0149 Re0.88 <em>Sc</em>1/ 3</p>
<p>System of Equations</p>
<p>When applied to a network as a whole, Equations D.5-D.7 represent a
coupled set of differential/algebraic equations with time-varying
coefficients that must be solved for <em>Ci</em> in each pipe i and <em>Cs</em>
in each storage facility s. This solution is subject to the following
set of externally imposed conditions:</p>
</div></blockquote>
<ul class="simple">
<li>initial conditions that specify <em>Ci</em> for all x in each pipe i and
<em>Cs</em> in each storage facility s at time 0,</li>
<li>boundary conditions that specify values for <em>Ck,ext</em> and <em>Qk,ext</em>
for all time t at each node k which has external mass inputs</li>
<li>hydraulic conditions which specify the volume <em>Vs</em> in each storage
facility s and the flow <em>Qi</em> in each link i at all times t.</li>
</ul>
<blockquote>
<div><p>Lagrangian Transport Algorithm</p>
<p>EPANET’s water quality simulator uses a Lagrangian time-based
approach to track the fate of discrete parcels of water as they move
along pipes and mix together at junctions between fixed-length time
steps (Liou and Kroon, 1987). These water quality time steps are
typically much shorter than the hydraulic time step (e.g., minutes
rather than hours) to accommodate the short times of travel that can
occur within pipes. As time progresses, the size of the most upstream
segment in a pipe increases as water enters the pipe while an equal
loss in size of the most downstream segment occurs as water leaves
the link. The size of the segments in between these remains
unchanged. (See Figure D.1).</p>
<p>The following steps occur at the end of each such time step:</p>
</div></blockquote>
<ol class="arabic simple">
<li>The water quality in each segment is updated to reflect any reaction
that may have occurred over the time step.</li>
<li>The water from the leading segments of pipes with flow into each
junction is blended together to compute a new water quality value at
the junction. The volume contributed from each segment equals the
product of its pipe’s flow rate and the time step. If this volume
exceeds that of the segment then the segment is destroyed and the
next one in line behind it begins to contribute its volume.</li>
<li>Contributions from outside sources are added to the quality values at
the junctions. The quality in storage tanks is updated depending on
the method used to model mixing in the tank (see below).</li>
<li>New segments are created in pipes with flow out of each junction,
reservoir, and tank. The segment volume equals the product of the
pipe flow and the time step. The segment’s water quality equals the
new quality value computed for the node.</li>
</ol>
<blockquote>
<div><p>To cut down on the number of segments, Step 4 is only carried out if
the new node quality differs by a user-specified tolerance from that
of the last segment in the outflow pipe. If the difference in quality
is below the tolerance then the size of the current last segment in
the outflow pipe is simply increased by the volume flowing into the
pipe over the time step.</p>
<p>This process is then repeated for the next water-quality time step.
At the start of the next hydraulic time step the order of segments in
any links that experience a flow reversal is switched. Initially each
pipe in the network consists of a single segment whose quality equals
the initial quality assigned to the upstream node.</p>
<p><img alt="image147" src="_images/image96.png" /></p>
</div></blockquote>
<p><img alt="image148" src="_images/image98.png" /></p>
<blockquote>
<div><strong>Figure D.1</strong> Behavior of Segments in the Lagrangian Solution Method</div></blockquote>
</div>
<div class="section" id="references">
<h2>References<a class="headerlink" href="#references" title="Permalink to this headline">¶</a></h2>
<blockquote>
<div><p>Bhave, P.R. 1991. <em>Analysis of Flow in Water Distribution Networks</em>.
Technomic Publishing. Lancaster, PA.</p>
<p>Clark, R.M. 1998. “Chlorine demand and Trihalomethane formation
kinetics: a second-order model”, <em>Jour. Env. Eng</em>., Vol. 124, No. 1,
pp. 16-24.</p>
<p>Dunlop, E.J. 1991. <em>WADI Users Manual</em>. Local Government Computer
Services Board, Dublin, Ireland.</p>
<p>George, A. &amp; Liu, J. W-H. 1981. <em>Computer Solution of Large Sparse
Positive Definite Systems</em>. Prentice-Hall, Englewood Cliffs, NJ.</p>
<p>Hamam, Y.M, &amp; Brameller, A. 1971. “Hybrid method for the solution of
piping networks”, <em>Proc. IEE</em>, Vol. 113, No. 11, pp. 1607-1612.</p>
<p>Koechling, M.T. 1998. <em>Assessment and Modeling of Chlorine Reactions
with Natural Organic Matter: Impact of Source Water Quality and
Reaction Conditions</em>, Ph.D. Thesis, Department of Civil and
Environmental Engineering, University of Cincinnati, Cincinnati,
Ohio.</p>
<p>Liou, C.P. and Kroon, J.R. 1987. “Modeling the propagation of
waterborne substances in distribution networks”, <em>J. AWWA</em>, 79(11),
54-58.</p>
<p>Notter, R.H. and Sleicher, C.A. 1971. “The eddy diffusivity in the
turbulent boundary layer near a wall”, <em>Chem. Eng. Sci.,</em> Vol. 26,
pp. 161-171.</p>
<p>Osiadacz, A.J. 1987. <em>Simulation and Analysis of Gas Networks</em>. E. &amp;
F.N. Spon, London.</p>
<p>Rossman, L.A., Boulos, P.F., and Altman, T. (1993). “Discrete
volume-element method for network water-quality models”, <em>J. Water
Resour. Plng. and Mgmt</em>,, Vol. 119, No. 5, 505-517.</p>
<p>Rossman, L.A., Clark, R.M., and Grayman, W.M. (1994). “Modeling
chlorine residuals in drinking-water distribution systems”, <em>Jour.
Env. Eng</em>., Vol. 120, No. 4, 803-820.</p>
<p>Rossman, L.A. and Boulos, P.F. (1996). “Numerical methods for
modeling water quality in distribution systems: A comparison”, <em>J.
Water Resour. Plng. and Mgmt</em>, Vol. 122, No. 2, 137-146.</p>
<p>Rossman, L.A. and Grayman, W.M. 1999. “Scale-model studies of mixing
in drinking water storage tanks”, <em>Jour. Env. Eng</em>., Vol. 125, No. 8,
pp. 755-761.</p>
<p>Salgado, R., Todini, E., &amp; O’Connell, P.E. 1988. “Extending the
gradient method to include pressure regulating valves in pipe
networks”. <em>Proc. Inter. Symposium on Computer Modeling of Water
Distribution Systems</em>, University of Kentucky, May 12-13.</p>
<p>Todini, E. &amp; Pilati, S. 1987. “A gradient method for the analysis of
pipe networks”. <em>International Conference on Computer Applications
for Water Supply and Distribution</em>, Leicester Polytechnic, UK,
September 8-10.</p>
</div></blockquote>
</div>
</div>


           </div>
           
          </div>
          <footer>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright .

    </p>
  </div>
  Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a <a href="https://github.com/rtfd/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  


  

    <script type="text/javascript">
        var DOCUMENTATION_OPTIONS = {
            URL_ROOT:'./',
            VERSION:'2.00.12',
            LANGUAGE:'None',
            COLLAPSE_INDEX:false,
            FILE_SUFFIX:'.html',
            HAS_SOURCE:  true,
            SOURCELINK_SUFFIX: '.txt'
        };
    </script>
      <script type="text/javascript" src="_static/jquery.js"></script>
      <script type="text/javascript" src="_static/underscore.js"></script>
      <script type="text/javascript" src="_static/doctools.js"></script>
      <script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.1/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>

  

  <script type="text/javascript" src="_static/js/theme.js"></script>

  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>