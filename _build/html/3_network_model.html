

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>3. THE NETWORK MODEL &mdash; EPANET 2.00.12 documentation</title>
  

  
  
  
  

  

  
  
    

  

  <link rel="stylesheet" href="_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="next" title="4. EPANET’S WORKSPACE" href="4_EPANET_workspace.html" />
    <link rel="prev" title="2. QUICK START TUTORIAL" href="2_quickstart.html" /> 

  
  <script src="_static/js/modernizr.min.js"></script>

</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">

    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search">
          

          
            <a href="index.html" class="icon icon-home"> EPANET
          

          
          </a>

          
            
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <ul class="current">
<li class="toctree-l1"><a class="reference internal" href="0_about_manual.html">About This Manual</a></li>
<li class="toctree-l1"><a class="reference internal" href="1_introduction.html">1. INTRODUCTION</a></li>
<li class="toctree-l1"><a class="reference internal" href="2_quickstart.html">2. QUICK START TUTORIAL</a></li>
<li class="toctree-l1 current"><a class="current reference internal" href="#">3. THE NETWORK MODEL</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#physical-components">Physical Components</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#junctions">Junctions</a></li>
<li class="toctree-l3"><a class="reference internal" href="#reservoirs">Reservoirs</a></li>
<li class="toctree-l3"><a class="reference internal" href="#tanks">Tanks</a></li>
<li class="toctree-l3"><a class="reference internal" href="#emitters">Emitters</a></li>
<li class="toctree-l3"><a class="reference internal" href="#pipes">Pipes</a></li>
<li class="toctree-l3"><a class="reference internal" href="#minor-losses">Minor Losses</a></li>
<li class="toctree-l3"><a class="reference internal" href="#pumps">Pumps</a></li>
<li class="toctree-l3"><a class="reference internal" href="#valves">Valves</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#non-physical-components">Non-Physical Components</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#curves">Curves</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#pump-curve">Pump Curve</a></li>
<li class="toctree-l4"><a class="reference internal" href="#efficiency-curve">Efficiency Curve</a></li>
<li class="toctree-l4"><a class="reference internal" href="#volume-curve">Volume Curve</a></li>
<li class="toctree-l4"><a class="reference internal" href="#headloss-curve">Headloss Curve</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#time-patterns">Time Patterns</a></li>
<li class="toctree-l3"><a class="reference internal" href="#controls">Controls</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#simple-controls">Simple Controls</a></li>
<li class="toctree-l4"><a class="reference internal" href="#rule-based-controls">Rule-Based Controls</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#hydraulic-simulation-model">Hydraulic Simulation Model</a></li>
<li class="toctree-l2"><a class="reference internal" href="#water-quality-simulation-model">Water Quality Simulation Model</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#basic-transport">Basic Transport</a></li>
<li class="toctree-l3"><a class="reference internal" href="#mixing-in-storage-tanks">Mixing in Storage Tanks</a></li>
<li class="toctree-l3"><a class="reference internal" href="#water-quality-reactions">Water Quality Reactions</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#bulk-reactions">Bulk Reactions</a></li>
<li class="toctree-l4"><a class="reference internal" href="#wall-reactions">Wall Reactions</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#water-age-and-source-tracing">Water Age and Source Tracing</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="4_EPANET_workspace.html">4. EPANET’S WORKSPACE</a></li>
<li class="toctree-l1"><a class="reference internal" href="5_projects.html">5. WORKING WITH PROJECTS</a></li>
<li class="toctree-l1"><a class="reference internal" href="6_objects.html">6. WORKING WITH OBJECTS</a></li>
<li class="toctree-l1"><a class="reference internal" href="7_map.html">7. WORKING WITH THE MAP</a></li>
<li class="toctree-l1"><a class="reference internal" href="8_analyzing_network.html">8. ANALYZING A NETWORK</a></li>
<li class="toctree-l1"><a class="reference internal" href="9_viewing_results.html">9. VIEWING RESULTS</a></li>
<li class="toctree-l1"><a class="reference internal" href="10_printing_copying.html">10. PRINTING AND COPYING</a></li>
<li class="toctree-l1"><a class="reference internal" href="11_importing_exporting.html">11. IMPORTING AND EXPORTING</a></li>
<li class="toctree-l1"><a class="reference internal" href="12_questions.html">12. FREQUENTLY ASKED QUESTIONS</a></li>
<li class="toctree-l1"><a class="reference internal" href="A_units.html">A. UNITS OF MEASUREMENT</a></li>
<li class="toctree-l1"><a class="reference internal" href="B_error_messages.html">B. ERROR MESSAGES</a></li>
<li class="toctree-l1"><a class="reference internal" href="C_command_line_EPANET.html">C. COMMAND LINE EPANET</a></li>
<li class="toctree-l1"><a class="reference internal" href="D_analysis_algorithms.html">D. ANALYSIS ALGORITHMS</a></li>
<li class="toctree-l1"><a class="reference internal" href="E_references.html">E. REFERENCES</a></li>
<li class="toctree-l1"><a class="reference internal" href="F_en2_section_keywords.html">F. INPUT SECTION KEYWORDS</a></li>
</ul>

            
          
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="index.html">EPANET</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content">
        
          















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="index.html">Docs</a> &raquo;</li>
        
      <li>3. THE NETWORK MODEL</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
            
            <a href="_sources/3_network_model.rst.txt" rel="nofollow"> View page source</a>
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="the-network-model">
<h1>3. THE NETWORK MODEL<a class="headerlink" href="#the-network-model" title="Permalink to this headline">¶</a></h1>
<p><em>This chapter discusses how EPANET models the physical objects that
constitute a distribution system as well as its operational
parameters. Details about how this information is entered into the
program are presented in later chapters. An overview is also given on
the computational methods that EPANET uses to simulate hydraulic and
water quality transport behavior.</em></p>
<hr class="docutils" />
<div class="section" id="physical-components">
<h2>Physical Components<a class="headerlink" href="#physical-components" title="Permalink to this headline">¶</a></h2>
<blockquote>
<div><p>EPANET models a water distribution system as a collection of links
connected to nodes. The links represent pipes, pumps, and control
valves. The nodes represent junctions, tanks, and reservoirs. The
figure below illustrates how these objects can be connected to one
another to form a network.</p>
<blockquote>
<div><blockquote>
<div><img alt="image30" src="_images/image28.png" /></div></blockquote>
<p><strong>Figure 3.1</strong> Physical Components in a Water Distribution System</p>
</div></blockquote>
</div></blockquote>
<div class="section" id="junctions">
<h3>Junctions<a class="headerlink" href="#junctions" title="Permalink to this headline">¶</a></h3>
<blockquote>
<div><p>Junctions are points in the network where links join together and
where water enters or leaves the network. The basic input data
required for junctions are:</p>
<blockquote>
<div><ul class="simple">
<li>elevation above some reference (usually mean sea level)</li>
<li>water demand (rate of withdrawal from the network)</li>
<li>initial water quality.</li>
</ul>
</div></blockquote>
<p>The output results computed for junctions at all time periods of a
simulation are:</p>
<blockquote>
<div><ul class="simple">
<li>hydraulic head (internal energy per unit weight of fluid)</li>
<li>pressure</li>
<li>water quality.</li>
</ul>
</div></blockquote>
<p>Junctions can also:</p>
<blockquote>
<div><ul class="simple">
<li>have their demand vary with time</li>
<li>have multiple categories of demands assigned to them</li>
<li>have negative demands indicating that water is entering the network</li>
<li>be water quality sources where constituents enter the network</li>
<li>contain emitters (or sprinklers) which make the outflow rate depend
on the pressure.</li>
</ul>
</div></blockquote>
</div></blockquote>
</div>
<div class="section" id="reservoirs">
<h3>Reservoirs<a class="headerlink" href="#reservoirs" title="Permalink to this headline">¶</a></h3>
<blockquote>
<div><p>Reservoirs are nodes that represent an infinite external source or
sink of water to the network. They are used to model such things as
lakes, rivers, groundwater aquifers, and tie-ins to other systems.
Reservoirs can also serve as water quality source points.</p>
<p>The primary input properties for a reservoir are its hydraulic head
(equal to the water surface elevation if the reservoir is not under
pressure) and its initial quality for water quality analysis.</p>
<p>Because a reservoir is a boundary point to a network, its head and
water quality cannot be affected by what happens within the network.
Therefore it has no computed output properties. However its head can
be made to vary with time by assigning a time pattern to it (see Time
Patterns below).</p>
</div></blockquote>
</div>
<div class="section" id="tanks">
<h3>Tanks<a class="headerlink" href="#tanks" title="Permalink to this headline">¶</a></h3>
<blockquote>
<div><p>Tanks are nodes with storage capacity, where the volume of stored
water can vary with time during a simulation. The primary input
properties for tanks are:</p>
<blockquote>
<div><ul class="simple">
<li>bottom elevation (where water level is zero)</li>
<li>diameter (or shape if non-cylindrical )</li>
<li>initial, minimum and maximum water levels</li>
<li>initial water quality.</li>
</ul>
</div></blockquote>
<p>The principal outputs computed over time are:</p>
<blockquote>
<div><ul class="simple">
<li>hydraulic head (water surface elevation)</li>
<li>water quality.</li>
</ul>
</div></blockquote>
<p>Tanks are required to operate within their minimum and maximum
levels. EPANET stops outflow if a tank is at its minimum level and
stops inflow if it is at its maximum level. Tanks can also serve as
water quality source points.</p>
</div></blockquote>
</div>
<div class="section" id="emitters">
<h3>Emitters<a class="headerlink" href="#emitters" title="Permalink to this headline">¶</a></h3>
<blockquote>
<div><p>Emitters are devices associated with junctions that model the flow
through a nozzle or orifice that discharges to the atmosphere. The
flow rate through the emitter varies as a function of the pressure
available at the node:</p>
<div class="math notranslate nohighlight">
\[q = C ~p^\gamma\]</div>
<p>where <em>q</em> = flow rate, <em>p</em> = pressure, <em>C</em> = discharge coefficient,
and γ = pressure exponent. For nozzles and sprinkler heads γ equals
0.5 and the manufacturer usually provides the value of the discharge
coefficient in units of gpm/psi <sup>0.5</sup> (stated as the flow
through the device at a 1 psi pressure drop).</p>
<p>Emitters are used to model flow through sprinkler systems and
irrigation networks. They can also be used to simulate leakage in a
pipe connected to the junction (if a discharge coefficient and
pressure exponent for the leaking crack or joint can be estimated) or
compute a fire flow at the junction (the flow available at some
minimum residual pressure). In the latter case one would use a very
high value of the discharge coefficient (e.g., 100 times the maximum
flow expected) and modify the junction’s elevation to include the
equivalent head of the pressure target. EPANET treats emitters as a
property of a junction and not as a separate network component.</p>
</div></blockquote>
</div>
<div class="section" id="pipes">
<h3>Pipes<a class="headerlink" href="#pipes" title="Permalink to this headline">¶</a></h3>
<blockquote>
<div><p>Pipes are links that convey water from one point in the network to
another. EPANET assumes that all pipes are full at all times. Flow
direction is from the end at higher hydraulic head (internal energy
per weight of water) to that at lower head. The principal hydraulic
input parameters for pipes are:</p>
<blockquote>
<div><ul class="simple">
<li>start and end nodes</li>
<li>diameter</li>
<li>length</li>
<li>roughness coefficient (for determining headloss)</li>
<li>status (open, closed, or contains a check valve).</li>
</ul>
</div></blockquote>
<p>The status parameter allows pipes to implicitly contain shutoff
(gate) valves and check (non-return) valves (which allow flow in only
one direction).</p>
<p>The water quality inputs for pipes consist of:</p>
<blockquote>
<div><ul class="simple">
<li>bulk reaction coefficient</li>
<li>wall reaction coefficient.</li>
</ul>
</div></blockquote>
<p>These coefficients are explained more thoroughly in Section 3.4
below.</p>
<p>Computed outputs for pipes include:</p>
<blockquote>
<div><ul class="simple">
<li>flow rate</li>
<li>velocity</li>
<li>headloss</li>
<li>Darcy-Weisbach friction factor</li>
<li>average reaction rate (over the pipe length)</li>
<li>average water quality (over the pipe length).</li>
</ul>
</div></blockquote>
<p>The hydraulic head lost by water flowing in a pipe due to friction
with the pipe walls can be computed using one of three different
formulas:</p>
<blockquote>
<div><ul class="simple">
<li>Hazen-Williams formula</li>
<li>Darcy-Weisbach formula</li>
<li>Chezy-Manning formula</li>
</ul>
</div></blockquote>
<p>The Hazen-Williams formula is the most commonly used headloss formula
in the US. It cannot be used for liquids other than water and was
originally developed for turbulent flow only. The Darcy-Weisbach
formula is the most theoretically correct. It applies over all flow
regimes and to all liquids. The Chezy-Manning formula is more
commonly used for open channel flow.</p>
<p>Each formula uses the following equation to compute headloss between
the start and end node of the pipe:</p>
<blockquote>
<div><div class="math notranslate nohighlight">
\[h_L = A ~ q^B\]</div>
</div></blockquote>
<p>where <em>h</em><sub>L</sub> = headloss (Length), <em>q</em> = flow rate (Volume/Time), <em>A</em>
= resistance coefficient, and <em>B</em> = flow exponent. Table 3.1 lists
expressions for the resistance coefficient and values for the flow
exponent for each of the formulas. Each formula uses a different pipe
roughness coefficient that must be determined empirically. Table 3.2
lists general ranges of these coefficients for different types of new
pipe materials. Be aware that a pipe’s roughness coefficient can
change considerably with age.</p>
<p>With the Darcy-Weisbach formula EPANET uses different methods to
compute the friction factor f depending on the flow regime:</p>
<blockquote>
<div><ul class="simple">
<li>The Hagen–Poiseuille formula is used for laminar flow (Re &lt; 2,000).</li>
<li>The Swamee and Jain approximation to the Colebrook-White equation is
used for fully turbulent flow (Re &gt; 4,000).</li>
<li>A cubic interpolation from the Moody Diagram is used for transitional
flow (2,000 &lt; Re &lt; 4,000) .</li>
</ul>
</div></blockquote>
<p>Consult Appendix D for the actual equations used.</p>
<blockquote>
<div><p><strong>Table 3.1</strong> Pipe Headloss Formulas for Full Flow (for headloss in
feet and flow rate in cfs)</p>
<p>Notes:</p>
<blockquote>
<div><div class="line-block">
<div class="line">C = Hazen-Williams roughness coefficient</div>
<div class="line">ε = Darcy-Weisbach roughness coefficient (ft)</div>
<div class="line">f = friction factor  (dependent on ε, d, and q)</div>
<div class="line">n = Manning roughness coefficient</div>
<div class="line">d = pipe diameter (ft)</div>
<div class="line">L = pipe length (ft)</div>
<div class="line">q = flow rate (cfs)</div>
</div>
</div></blockquote>
<p><strong>Table 3.2</strong> Roughness Coefficients for New Pipe</p>
<table border="1" class="docutils">
<colgroup>
<col width="25%" />
<col width="25%" />
<col width="26%" />
<col width="25%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head"><em>Material</em></th>
<th class="head"><p class="first"><em>Hazen-Williams
C</em></p>
<div class="last line-block">
<div class="line"><em>(unitless)</em></div>
</div>
</th>
<th class="head"><blockquote class="first">
<div><em>Darcy-Weisbach
ε</em></div></blockquote>
<div class="last line-block">
<div class="line"><em>(feet x 10^-3)</em></div>
</div>
</th>
<th class="head"><p class="first"><em>Manning’s n</em></p>
<div class="last line-block">
<div class="line"><em>(unitless)</em></div>
</div>
</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td>Cast Iron</td>
<td>130 – 140</td>
<td>0.85</td>
<td>0.012 -
0.015</td>
</tr>
<tr class="row-odd"><td><p class="first">Concrete or</p>
<p class="last">Concrete
Lined</p>
</td>
<td>120 – 140</td>
<td>1.0 - 10</td>
<td>0.012 -
0.017</td>
</tr>
<tr class="row-even"><td>Galvanized
Iron</td>
<td>120</td>
<td>0.5</td>
<td>0.015 -
0.017</td>
</tr>
<tr class="row-odd"><td>Plastic</td>
<td>140 – 150</td>
<td>0.005</td>
<td>0.011 -
0.015</td>
</tr>
<tr class="row-even"><td>Steel</td>
<td>140 – 150</td>
<td>0.15</td>
<td>0.015 -
0.017</td>
</tr>
<tr class="row-odd"><td>Vitrified
Clay</td>
<td>110</td>
<td>&#160;</td>
<td>0.013 -
0.015</td>
</tr>
</tbody>
</table>
</div></blockquote>
<p>Pipes can be set open or closed at preset times or when specific
conditions exist, such as when tank levels fall below or above
certain set points, or when nodal pressures fall below or above
certain values. See the discussion of Controls in Section 3.2.</p>
</div></blockquote>
</div>
<div class="section" id="minor-losses">
<h3>Minor Losses<a class="headerlink" href="#minor-losses" title="Permalink to this headline">¶</a></h3>
<blockquote>
<div><p>Minor head losses (also called local losses) are caused by the added
turbulence that occurs at bends and fittings. The importance of
including such losses depends on the layout of the network and the
degree of accuracy required. They can be accounted for by assigning
the pipe a minor loss coefficient. The minor headloss becomes the
product of this coefficient and the velocity head of the pipe, i.e.,</p>
<div class="math notranslate nohighlight">
\[h_L = K (\frac{v^2}{2g})\]</div>
<p>where <em>K</em> = minor loss coefficient, <em>v</em> = flow velocity
(Length/Time), and <em>g</em> = acceleration of gravity
(Length/Time:sup:<cite>2</cite>). Table 3.3 provides minor loss coefficients for
several types of fittings.</p>
<blockquote>
<div><p><strong>Table 3.3</strong> Minor Loss Coefficients for Selected Fittings</p>
<table border="1" class="docutils">
<colgroup>
<col width="66%" />
<col width="34%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head"><em>FITTING</em></th>
<th class="head"><em>LOSS COEFFICIENT</em></th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td>Globe valve, fully open</td>
<td>10.0</td>
</tr>
<tr class="row-odd"><td>Angle valve, fully open</td>
<td>5.0</td>
</tr>
<tr class="row-even"><td>Swing check valve, fully open</td>
<td>2.5</td>
</tr>
<tr class="row-odd"><td>Gate valve, fully open</td>
<td>0.2</td>
</tr>
<tr class="row-even"><td>Short-radius elbow</td>
<td>0.9</td>
</tr>
<tr class="row-odd"><td>Medium-radius elbow</td>
<td>0.8</td>
</tr>
<tr class="row-even"><td>Long-radius elbow</td>
<td>0.6</td>
</tr>
<tr class="row-odd"><td>45 degree elbow</td>
<td>0.4</td>
</tr>
<tr class="row-even"><td>Closed return bend</td>
<td>2.2</td>
</tr>
<tr class="row-odd"><td>Standard tee - flow through run</td>
<td>0.6</td>
</tr>
<tr class="row-even"><td>Standard tee - flow through branch</td>
<td>1.8</td>
</tr>
<tr class="row-odd"><td>Square entrance</td>
<td>0.5</td>
</tr>
<tr class="row-even"><td>Exit</td>
<td>1.0</td>
</tr>
</tbody>
</table>
</div></blockquote>
</div></blockquote>
</div>
<div class="section" id="pumps">
<h3>Pumps<a class="headerlink" href="#pumps" title="Permalink to this headline">¶</a></h3>
<blockquote>
<div><p>Pumps are links that impart energy to a fluid thereby raising its
hydraulic head. The principal input parameters for a pump are its
start and end nodes and its pump curve (the combination of heads and
flows that the pump can produce). In lieu of a pump curve, the pump
could be represented as a constant energy device, one that supplies a
constant amount of energy (horsepower or kilowatts) to the fluid for
all combinations of flow and head.</p>
<p>The principal output parameters are flow and head gain. Flow through
a pump is unidirectional and EPANET will not allow a pump to operate
outside the range of its pump curve.</p>
<p>Variable speed pumps can also be considered by specifying that their
speed setting be changed under these same types of conditions. By
definition, the original pump curve supplied to the program has a
relative speed setting of 1. If the pump speed doubles, then the
relative setting would be 2; if run at half speed, the relative
setting is 0.5 and so on. Changing the pump speed shifts the position
and shape of the pump curve (see the section on Pump Curves below).</p>
<p>As with pipes, pumps can be turned on and off at preset times or when
certain conditions exist in the network. A pump’s operation can also
be described by assigning it a time pattern of relative speed
settings. EPANET can also compute the</p>
<p>energy consumption and cost of a pump. Each pump can be assigned an
efficiency curve and schedule of energy prices. If these are not
supplied then a set of global energy options will be used.</p>
<p>Flow through a pump is unidirectional. If system conditions require
more head than the pump can produce, EPANET shuts the pump off. If
more than the maximum flow is required, EPANET extrapolates the pump
curve to the required flow, even if this produces a negative head. In
both cases a warning message will be issued.</p>
</div></blockquote>
</div>
<div class="section" id="valves">
<h3>Valves<a class="headerlink" href="#valves" title="Permalink to this headline">¶</a></h3>
<blockquote>
<div><p>Valves are links that limit the pressure or flow at a specific point
in the network. Their principal input parameters include:</p>
<blockquote>
<div><ul class="simple">
<li>start and end nodes</li>
<li>diameter</li>
<li>setting</li>
<li>status.</li>
</ul>
</div></blockquote>
<p>The computed outputs for a valve are flow rate and headloss. The
different types of valves included in EPANET are:</p>
<blockquote>
<div><ul class="simple">
<li>Pressure Reducing Valve (PRV)</li>
<li>Pressure Sustaining Valve (PSV)</li>
<li>Pressure Breaker Valve (PBV)</li>
<li>Flow Control Valve (FCV)</li>
<li>Throttle Control Valve (TCV)</li>
<li>General Purpose Valve (GPV).</li>
</ul>
</div></blockquote>
<p>PRVs limit the pressure at a point in the pipe network. EPANET
computes in which of three different states a PRV can be in:</p>
<blockquote>
<div><ul class="simple">
<li>partially opened (i.e., active) to achieve its pressure setting on
its downstream side when the upstream pressure is above the setting</li>
<li>fully open if the upstream pressure is below the setting</li>
<li>closed if the pressure on the downstream side exceeds that on the
upstream side (i.e., reverse flow is not allowed).</li>
</ul>
</div></blockquote>
<p>PSVs maintain a set pressure at a specific point in the pipe network.
EPANET computes in which of three different states a PSV can be in:</p>
<blockquote>
<div><ul class="simple">
<li>partially opened (i.e., active) to maintain its pressure setting on
its upstream side when the downstream pressure is below this value</li>
<li>fully open if the downstream pressure is above the setting</li>
<li>closed if the pressure on the downstream side exceeds that on the
upstream side (i.e., reverse flow is not allowed).</li>
</ul>
</div></blockquote>
<p>PBVs force a specified pressure loss to occur across the valve. Flow
through the valve can be in either direction. PBV’s are not true
physical devices but can be used to model situations where a
particular pressure drop is known to exist.</p>
<p>FCVs limit the flow to a specified amount. The program produces a
warning message if this flow cannot be maintained without having to
add additional head at the valve (i.e., the flow cannot be maintained
even with the valve fully open).</p>
<p>TCVs simulate a partially closed valve by adjusting the minor head
loss coefficient of the valve. A relationship between the degree to
which a valve is closed and the resulting head loss coefficient is
usually available from the valve manufacturer.</p>
<p>GPVs are used to represent a link where the user supplies a special
flow - head loss relationship instead of following one of the
standard hydraulic formulas. They can be used to model turbines, well
draw-down or reduced-flow backflow prevention valves.</p>
<p>Shutoff (gate) valves and check (non-return) valves, which completely
open or close pipes, are not considered as separate valve links but
are instead included as a property of the pipe in which they are
placed.</p>
<p>Each type of valve has a different type of setting parameter that
describes its operating point (pressure for PRVs, PSVs, and PBVs;
flow for FCVs; loss coefficient for TCVs, and head loss curve for
GPVs).</p>
<p>Valves can have their control status overridden by specifying they be
either completely open or completely closed. A valve’s status and its
setting can be changed during the simulation by using control
statements.</p>
<p>Because of the ways in which valves are modeled the following rules
apply when adding valves to a network:</p>
<blockquote>
<div><ul class="simple">
<li>a PRV, PSV or FCV cannot be directly connected to a reservoir or tank
(use a length of pipe to separate the two)</li>
<li>PRVs cannot share the same downstream node or be linked in series</li>
<li>two PSVs cannot share the same upstream node or be linked in series</li>
<li>a PSV cannot be connected to the downstream node of a PRV.</li>
</ul>
</div></blockquote>
</div></blockquote>
</div>
</div>
<div class="section" id="non-physical-components">
<h2>Non-Physical Components<a class="headerlink" href="#non-physical-components" title="Permalink to this headline">¶</a></h2>
<blockquote>
<div>In addition to physical components, EPANET employs three types of
informational objects – curves, patterns, and controls - that
describe the behavior and operational aspects of a distribution
system.</div></blockquote>
<div class="section" id="curves">
<h3>Curves<a class="headerlink" href="#curves" title="Permalink to this headline">¶</a></h3>
<blockquote>
<div><p>Curves are objects that contain data pairs representing a
relationship between two quantities. Two or more objects can share
the same curve. An EPANET model can utilize the following types of
curves:</p>
<blockquote>
<div><ul class="simple">
<li>Pump Curve</li>
<li>Efficiency Curve</li>
<li>Volume Curve</li>
<li>Head Loss Curve Pump Curve</li>
</ul>
</div></blockquote>
</div></blockquote>
<div class="section" id="pump-curve">
<h4>Pump Curve<a class="headerlink" href="#pump-curve" title="Permalink to this headline">¶</a></h4>
<blockquote>
<div><p>A Pump Curve represents the relationship between the head and flow
rate that a pump can deliver at its nominal speed setting. Head is
the head gain imparted to the water by the pump and is plotted on the
vertical (Y) axis of the curve in feet (meters). Flow rate is plotted
on the horizontal (X) axis in flow units. A valid pump curve must
have decreasing head with increasing flow.</p>
<p>EPANET will use a different shape of pump curve depending on the
number of points supplied (see Figure 3.2):</p>
<blockquote>
<div><dl class="docutils">
<dt>Single-Point Pump Curve:</dt>
<dd><a class="reference internal" href="_images/image29.png"><img alt="image31" class="align-middle" src="_images/image29.png" style="width: 250pt;" /></a></dd>
</dl>
<div class="line-block">
<div class="line"><br /></div>
</div>
<dl class="docutils">
<dt>Three-Point Pump Curve:</dt>
<dd><a class="reference internal" href="_images/image30-2.png"><img alt="image32" class="align-middle" src="_images/image30-2.png" style="width: 250pt;" /></a></dd>
</dl>
<div class="line-block">
<div class="line"><br /></div>
</div>
<dl class="docutils">
<dt>Multi-Point Pump Curve:</dt>
<dd><a class="reference internal" href="_images/image29-2.png"><img alt="image31-2" class="align-middle" src="_images/image29-2.png" style="width: 250pt;" /></a></dd>
</dl>
<div class="line-block">
<div class="line"><br /></div>
</div>
<dl class="docutils">
<dt>Variable-Speed Pump Curve:</dt>
<dd><a class="reference internal" href="_images/image30.png"><img alt="image32-2" class="align-middle" src="_images/image30.png" style="width: 250pt;" /></a></dd>
</dl>
<p><strong>Figure 3.2</strong> Example Pump Curves</p>
</div></blockquote>
<p><em>Single-Point Curve</em> - A single-point pump curve is defined by a
single head-flow combination that represents a pump’s desired
operating point. EPANET adds two more points to the curve by assuming
a shutoff head at zero flow equal to 133% of the design head and a
maximum flow at zero head equal to twice the design flow. It then
treats the curve as a three-point curve.</p>
<p><em>Three-Point Curve</em> - A three-point pump curve is defined by three
operating points: a Low Flow point (flow and head at low or zero flow
condition), a Design Flow point (flow and head at desired operating
point), and a Maximum Flow point (flow and head at maximum flow).
EPANET tries to fit a continuous function of the form</p>
<div class="math notranslate nohighlight">
\[h_G = A − B ~ q^C\]</div>
<p>through the three points to define the entire pump curve. In this
function, <em>h</em><sub>g</sub> = head gain, <em>q</em> = flow rate, and <em>A, B</em>, and <em>C</em>
are constants.</p>
<p><em>Multi-Point Curve</em> – A multi-point pump curve is defined by
providing either a pair of head-flow points or four or more such
points. EPANET creates a complete curve by connecting the points with
straight-line segments.</p>
<p>For variable speed pumps, the pump curve shifts as the speed changes.
The relationships between flow (Q) and head (H) at speeds N1 and N2
are</p>
<div class="math notranslate nohighlight">
\[\frac{Q_1}{Q_2} = \frac{N_1}{N_2}  ~~~  \frac{H_1}{H_2} = (\frac{N_1}{N_2})^2\]</div>
</div></blockquote>
</div>
<div class="section" id="efficiency-curve">
<h4>Efficiency Curve<a class="headerlink" href="#efficiency-curve" title="Permalink to this headline">¶</a></h4>
<blockquote>
<div><p>An Efficiency Curve determines pump efficiency (Y in percent) as a
function of pump flow rate (X in flow units). An example efficiency
curve is shown in Figure 3.3.
Efficiency should represent wire-to-water efficiency that takes into
account mechanical losses in the pump itself as well as electrical
losses in the pump’s motor. The curve is used only for energy
calculations. If not supplied for a specific pump then a fixed global
pump efficiency will be used.</p>
<blockquote>
<div><blockquote>
<div><img alt="image33" src="_images/image31.png" /></div></blockquote>
<p><strong>Figure 3.3</strong> Pump Efficiency Curve</p>
</div></blockquote>
</div></blockquote>
</div>
<div class="section" id="volume-curve">
<h4>Volume Curve<a class="headerlink" href="#volume-curve" title="Permalink to this headline">¶</a></h4>
<blockquote>
<div><p>A Volume Curve determines how storage tank volume (Y in cubic feet or
cubic meters) varies as a function of water level (X in feet or
meters). It is used when it is necessary to accurately represent
tanks whose cross-sectional area varies with height. The lower and
upper water levels supplied for the curve must contain the lower and
upper levels between which the tank operates. An example of a tank
volume curve is given below.</p>
<blockquote>
<div><blockquote>
<div><img alt="image34" src="_images/image32.png" /></div></blockquote>
<p><strong>Figure 3.4</strong> Tank Volume Curve</p>
</div></blockquote>
</div></blockquote>
</div>
<div class="section" id="headloss-curve">
<h4>Headloss Curve<a class="headerlink" href="#headloss-curve" title="Permalink to this headline">¶</a></h4>
<blockquote>
<div>A Headloss Curve is used to described the headloss (Y in feet or
meters) through a General Purpose Valve (GPV) as a function of flow
rate (X in flow units). It provides the capability to model devices
and situations with unique headloss-flow relationships, such as
reduced flow - backflow prevention valves, turbines, and well
draw-down behavior.</div></blockquote>
</div>
</div>
<div class="section" id="time-patterns">
<h3>Time Patterns<a class="headerlink" href="#time-patterns" title="Permalink to this headline">¶</a></h3>
<blockquote>
<div><p>A Time Pattern is a collection of multipliers that can be applied to
a quantity to allow it to vary over time. Nodal demands, reservoir
heads, pump schedules, and water quality source inputs can all have
time patterns associated with them. The time interval used in all
patterns is a fixed value, set with the project’s Time Options (see
Section 8.1). Within this interval a quantity remains at a constant
level, equal to the product of its nominal value and the pattern’s
multiplier for that time period. Although all time patterns must
utilize the same time interval, each can have a different number of
periods. When the simulation clock exceeds the number of periods in a
pattern, the pattern wraps around to its first period again.</p>
<p>As an example of how time patterns work consider a junction node with
an average demand of 10 GPM. Assume that the time pattern interval
has been set to 4 hours and a pattern with the following multipliers
has been specified for demand at this node:</p>
<table border="1" class="docutils">
<colgroup>
<col width="29%" />
<col width="12%" />
<col width="12%" />
<col width="12%" />
<col width="12%" />
<col width="12%" />
<col width="12%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">Period</th>
<th class="head">1</th>
<th class="head">2</th>
<th class="head">3</th>
<th class="head">4</th>
<th class="head">5</th>
<th class="head">6</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td>Multiplier</td>
<td>0.5</td>
<td>0.8</td>
<td>1.0</td>
<td>1.2</td>
<td>0.9</td>
<td>0.7</td>
</tr>
</tbody>
</table>
<p>Then during the simulation the actual demand exerted at this node
will be as follows:</p>
<table border="1" class="docutils">
<colgroup>
<col width="15%" />
<col width="15%" />
<col width="9%" />
<col width="11%" />
<col width="13%" />
<col width="13%" />
<col width="13%" />
<col width="13%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">Hours</th>
<th class="head">0-4</th>
<th class="head">4-8</th>
<th class="head">8-12</th>
<th class="head">12-16</th>
<th class="head">16-20</th>
<th class="head">20-24</th>
<th class="head">24-28</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td>Demand</td>
<td>5</td>
<td>8</td>
<td>10</td>
<td>12</td>
<td>9</td>
<td>7</td>
<td>5</td>
</tr>
</tbody>
</table>
</div></blockquote>
</div>
<div class="section" id="controls">
<h3>Controls<a class="headerlink" href="#controls" title="Permalink to this headline">¶</a></h3>
<blockquote>
<div><p>Controls are statements that determine how the network is operated
over time. They specify the status of selected links as a function of
time, tank water levels, and pressures at select points within the
network. There are two categories of controls that can be used:</p>
<blockquote>
<div><ul class="simple">
<li>Simple Controls</li>
<li>Rule-Based Controls Simple Controls</li>
</ul>
</div></blockquote>
</div></blockquote>
<div class="section" id="simple-controls">
<h4>Simple Controls<a class="headerlink" href="#simple-controls" title="Permalink to this headline">¶</a></h4>
<blockquote>
<div><p>Simple controls change the status or setting of a link based on:</p>
<blockquote>
<div><ul class="simple">
<li>the water level in a tank,</li>
<li>the pressure at a junction,</li>
<li>the time into the simulation,</li>
<li>the time of day.</li>
</ul>
</div></blockquote>
<p>They are statements expressed in one of the following three formats:</p>
<blockquote>
<div><blockquote>
<div><p>LINK <em>x status</em> IF NODE <em>y</em> ABOVE/BELOW <em>z</em></p>
<p>LINK <em>x status</em> AT TIME <em>t</em></p>
<p>LINK <em>x status</em> AT CLOCKTIME <em>c</em> AM/PM</p>
</div></blockquote>
<dl class="docutils">
<dt>where:</dt>
<dd><div class="first last line-block">
<div class="line"><code class="docutils literal notranslate"><span class="pre">x</span></code> = a link ID label,</div>
<div class="line"><code class="docutils literal notranslate"><span class="pre">status</span></code> = OPEN or CLOSED, a pump speed setting, or a control valve
setting,</div>
<div class="line"><code class="docutils literal notranslate"><span class="pre">y</span></code> = a node ID label,</div>
<div class="line"><code class="docutils literal notranslate"><span class="pre">z</span></code> = a pressure for a junction or a water level for a tank,</div>
<div class="line"><code class="docutils literal notranslate"><span class="pre">t</span></code> = a time since the start of the simulation in decimal hours or in
hours:minutes notation,</div>
<div class="line"><code class="docutils literal notranslate"><span class="pre">c</span></code> = a 24-hour clock time.</div>
</div>
</dd>
</dl>
</div></blockquote>
<p>Some examples of simple controls are:</p>
<blockquote>
<div><table border="1" class="docutils">
<colgroup>
<col width="54%" />
<col width="46%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head"><em>Control Statement</em></th>
<th class="head"><em>Meaning</em></th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td>LINK 12 CLOSED IF NODE 23 ABOVE 20</td>
<td><div class="first last line-block">
<div class="line">(Close Link 12 when the
level in Tank 23</div>
<div class="line">exceeds 20 ft.)</div>
</div>
</td>
</tr>
<tr class="row-odd"><td>LINK 12 OPEN IF NODE 130 BELOW 30</td>
<td><div class="first last line-block">
<div class="line">(Open Link 12 if the pressure
at Node 130</div>
<div class="line">drops below 30 psi)</div>
</div>
</td>
</tr>
<tr class="row-even"><td>LINK 12 1.5 AT TIME 16</td>
<td><div class="first last line-block">
<div class="line">(Set the relative speed of
pump 12 to 1.5</div>
<div class="line">at 16 hours into the
simulation)</div>
</div>
</td>
</tr>
<tr class="row-odd"><td><div class="first last line-block">
<div class="line">LINK 12 CLOSED AT CLOCKTIME 10 AM</div>
<div class="line">LINK 12 OPEN AT CLOCKTIME 8 PM</div>
</div>
</td>
<td><div class="first last line-block">
<div class="line">(Link 12 is repeatedly closed
at 10 AM and</div>
<div class="line">opened at 8 PM
throughout the simulation)</div>
</div>
</td>
</tr>
</tbody>
</table>
<p>There is no limit on the number of simple control statements that can
be used.</p>
<p><strong>Note:</strong> Level controls are stated in terms of the height of water
above the tank bottom, not the elevation (total head) of the water
surface.</p>
<p><strong>Note:</strong> Using a pair of pressure controls to open and close a link
can cause the system to become unstable if the pressure settings are
too close to one another. In this case using a pair of Rule-Based
controls might provide more stability.</p>
</div></blockquote>
</div></blockquote>
</div>
<div class="section" id="rule-based-controls">
<h4>Rule-Based Controls<a class="headerlink" href="#rule-based-controls" title="Permalink to this headline">¶</a></h4>
<blockquote>
<div><p>Rule-Based Controls allow link status and settings to be based on a
combination of conditions that might exist in the network after an
initial hydraulic state of the system is computed. Here are several
examples of Rule-Based Controls:</p>
<blockquote>
<div><p><strong>Example 1</strong>:</p>
<blockquote>
<div><p>This set of rules shuts down a pump and opens a by-pass pipe when the
level in a tank exceeds a certain value and does the opposite when
the level is below another value.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">RULE</span> <span class="mi">1</span>

<span class="n">IF</span> <span class="n">TANK</span> <span class="mi">1</span> <span class="n">LEVEL</span> <span class="n">ABOVE</span> <span class="mf">19.1</span>
<span class="n">THEN</span> <span class="n">PUMP</span> <span class="mi">335</span> <span class="n">STATUS</span> <span class="n">IS</span> <span class="n">CLOSED</span>
<span class="n">AND</span> <span class="n">PIPE</span> <span class="mi">330</span> <span class="n">STATUS</span> <span class="n">IS</span> <span class="n">OPEN</span>
</pre></div>
</div>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">RULE</span> <span class="mi">2</span>

<span class="n">IF</span> <span class="n">TANK</span> <span class="mi">1</span> <span class="n">LEVEL</span> <span class="n">BELOW</span> <span class="mf">17.1</span>
<span class="n">THEN</span> <span class="n">PUMP</span> <span class="mi">335</span> <span class="n">STATUS</span> <span class="n">IS</span> <span class="n">OPEN</span>
<span class="n">AND</span> <span class="n">PIPE</span> <span class="mi">330</span> <span class="n">STATUS</span> <span class="n">IS</span> <span class="n">CLOSED</span>
</pre></div>
</div>
</div></blockquote>
<p><strong>Example 2</strong>:</p>
<blockquote>
<div><p>These rules change the tank level at which a pump turns on depending
on the time of day.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">RULE</span> <span class="mi">3</span>

<span class="n">IF</span> <span class="n">SYSTEM</span> <span class="n">CLOCKTIME</span> <span class="o">&gt;=</span> <span class="mi">8</span> <span class="n">AM</span>
<span class="n">AND</span> <span class="n">SYSTEM</span> <span class="n">CLOCKTIME</span> <span class="o">&lt;</span> <span class="mi">6</span> <span class="n">PM</span>
<span class="n">AND</span> <span class="n">TANK</span> <span class="mi">1</span> <span class="n">LEVEL</span> <span class="n">BELOW</span> <span class="mi">12</span>
<span class="n">THEN</span> <span class="n">PUMP</span> <span class="mi">335</span> <span class="n">STATUS</span> <span class="n">IS</span> <span class="n">OPEN</span>
</pre></div>
</div>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">RULE</span> <span class="mi">4</span>

<span class="n">IF</span> <span class="n">SYSTEM</span> <span class="n">CLOCKTIME</span> <span class="o">&gt;=</span> <span class="mi">6</span> <span class="n">PM</span>
<span class="n">OR</span> <span class="n">SYSTEM</span> <span class="n">CLOCKTIME</span> <span class="o">&lt;</span> <span class="mi">8</span> <span class="n">AM</span>
<span class="n">AND</span> <span class="n">TANK</span> <span class="mi">1</span> <span class="n">LEVEL</span> <span class="n">BELOW</span> <span class="mi">14</span>
<span class="n">THEN</span> <span class="n">PUMP</span> <span class="mi">335</span> <span class="n">STATUS</span> <span class="n">IS</span> <span class="n">OPEN</span>
</pre></div>
</div>
</div></blockquote>
</div></blockquote>
<p>A description of the formats used with Rule-Based controls can be
found in Appendix C, under the [RULES] heading (page 150).</p>
</div></blockquote>
</div>
</div>
</div>
<div class="section" id="hydraulic-simulation-model">
<h2>Hydraulic Simulation Model<a class="headerlink" href="#hydraulic-simulation-model" title="Permalink to this headline">¶</a></h2>
<blockquote>
<div><p>EPANET’s hydraulic simulation model computes junction heads and link
flows for a fixed set of reservoir levels, tank levels, and water
demands over a succession of points in time. From one time step to
the next reservoir levels and junction demands are updated according
to their prescribed time patterns while tank levels are updated using
the current flow solution. The solution for heads and flows at a
particular point in time involves solving simultaneously the
conservation of flow equation for each junction and the headloss
relationship across each link in the network. This process,</p>
<p>known as “hydraulically balancing” the network, requires using an
iterative technique to solve the nonlinear equations involved. EPANET
employs the “Gradient Algorithm” for this purpose. Consult Appendix D
for details.</p>
<p>The hydraulic time step used for extended period simulation (EPS) can
be set by the user. A typical value is 1 hour. Shorter time steps
than normal will occur automatically whenever one of the following
events occurs:</p>
<blockquote>
<div><ul class="simple">
<li>the next output reporting time period occurs</li>
<li>the next time pattern period occurs</li>
<li>a tank becomes empty or full</li>
<li>a simple control or rule-based control is activated.</li>
</ul>
</div></blockquote>
</div></blockquote>
</div>
<div class="section" id="water-quality-simulation-model">
<h2>Water Quality Simulation Model<a class="headerlink" href="#water-quality-simulation-model" title="Permalink to this headline">¶</a></h2>
<div class="section" id="basic-transport">
<h3>Basic Transport<a class="headerlink" href="#basic-transport" title="Permalink to this headline">¶</a></h3>
<blockquote>
<div><p>EPANET’s water quality simulator uses a Lagrangian time-based
approach to track the fate of discrete parcels of water as they move
along pipes and mix together at junctions between fixed-length time
steps. These water quality time steps are typically much shorter than
the hydraulic time step (e.g., minutes rather than hours) to
accommodate the short times of travel that can occur within pipes.</p>
<p>The method tracks the concentration and size of a series of
non-overlapping segments of water that fills each link of the
network. As time progresses, the size of the most upstream segment in
a link increases as water enters the link while an equal loss in size
of the most downstream segment occurs as water leaves the link. The
size of the segments in between these remains unchanged.</p>
<p>For each water quality time step, the contents of each segment are
subjected to reaction, a cumulative account is kept of the total mass
and flow volume entering each node, and the positions of the segments
are updated. New node concentrations are then calculated, which
include the contributions from any external sources. Storage tank
concentrations are updated depending on the type of mixing model that
is used (see below). Finally, a new segment will be created at the
end of each link that receives inflow from a node if the new node
quality differs by a user-specified tolerance from that of the link’s
last segment.</p>
<p>Initially each pipe in the network consists of a single segment whose
quality equals the initial quality assigned to the upstream node.
Whenever there is a flow reversal in a pipe, the pipe’s parcels are
re-ordered from front to back.</p>
</div></blockquote>
</div>
<div class="section" id="mixing-in-storage-tanks">
<h3>Mixing in Storage Tanks<a class="headerlink" href="#mixing-in-storage-tanks" title="Permalink to this headline">¶</a></h3>
<blockquote>
<div><p>EPANET can use four different types of models to characterize mixing
within storage tanks as illustrated in Figure 3.5:</p>
<blockquote>
<div><ul class="simple">
<li>Complete Mixing</li>
<li>Two-Compartment Mixing</li>
<li>FIFO Plug Flow</li>
<li>LIFO Plug Flow</li>
</ul>
</div></blockquote>
<p>Different models can be used with different tanks within a network.</p>
<blockquote>
<div><blockquote>
<div><img alt="image35" src="_images/image33.png" /></div></blockquote>
<ol class="upperalpha simple">
<li>Complete Mixing</li>
</ol>
<blockquote>
<div><img alt="image36" src="_images/image34.png" /></div></blockquote>
<ol class="upperalpha simple" start="2">
<li>Two-Compartment Mixing</li>
</ol>
<blockquote>
<div><img alt="image37" src="_images/image35.png" /></div></blockquote>
<ol class="upperalpha simple" start="3">
<li>Plug Flow - FIFO</li>
</ol>
<blockquote>
<div><img alt="image38" src="_images/image36.png" /></div></blockquote>
<ol class="upperalpha simple" start="4">
<li>Plug Flow - LIFO</li>
</ol>
</div></blockquote>
<p><strong>Figure 3.5</strong> Tank Mixing Models</p>
<p>The Complete Mixing model (Figure 3.5(a)) assumes that all water that
enters a tank is instantaneously and completely mixed with the water
already in the tank. It is the simplest form of mixing behavior to
assume, requires no extra parameters to describe it, and seems to
apply quite well to a large number of facilities that operate in
fill- and-draw fashion.</p>
<p>The Two-Compartment Mixing model (Figure 3.5(b)) divides the
available storage volume in a tank into two compartments, both of
which are assumed completely mixed. The inlet/outlet pipes of the
tank are assumed to be located in the first</p>
<p>compartment. New water that enters the tank mixes with the water in
the first compartment. If this compartment is full, then it sends its
overflow to the second compartment where it completely mixes with the
water already stored there. When water leaves the tank, it exits from
the first compartment, which if full, receives an equivalent amount
of water from the second compartment to make up the difference. The
first compartment is capable of simulating short-circuiting between
inflow and outflow while the second compartment can represent dead
zones. The user must supply a single parameter, which is the fraction
of the total tank volume devoted to the first compartment.</p>
<p>The FIFO Plug Flow model (Figure 3.5(c)) assumes that there is no
mixing of water at all during its residence time in a tank. Water
parcels move through the tank in a segregated fashion where the first
parcel to enter is also the first to leave. Physically speaking, this
model is most appropriate for baffled tanks that operate with
simultaneous inflow and outflow. There are no additional parameters
needed to describe this mixing model.</p>
<p>The LIFO Plug Flow model (Figure 3.5(d)) also assumes that there is
no mixing between parcels of water that enter a tank. However in
contrast to FIFO Plug Flow, the water parcels stack up one on top of
another, where water enters and leaves the tank on the bottom. This
type of model might apply to a tall, narrow standpipe with an
inlet/outlet pipe at the bottom and a low momentum inflow. It
requires no additional parameters be provided.</p>
</div></blockquote>
</div>
<div class="section" id="water-quality-reactions">
<h3>Water Quality Reactions<a class="headerlink" href="#water-quality-reactions" title="Permalink to this headline">¶</a></h3>
<blockquote>
<div><p>EPANET can track the growth or decay of a substance by reaction as it
travels through a distribution system. In order to do this it needs
to know the rate at which the substance reacts and how this rate
might depend on substance concentration. Reactions can occur both
within the bulk flow and with material along the pipe wall. This is
illustrated in Figure 3.6. In this example free chlorine (HOCl) is
shown reacting with natural organic matter (NOM) in the bulk phase
and is also transported through a boundary layer at the pipe wall to
oxidize iron (Fe) released from pipe wall corrosion. Bulk fluid
reactions can also occur within tanks. EPANET allows a modeler to
treat these two reaction zones separately.</p>
<blockquote>
<div><blockquote>
<div><img alt="image36-2" src="_images/image36-2.png" /></div></blockquote>
<p><strong>Figure 3.6</strong> Reaction Zones Within a Pipe</p>
</div></blockquote>
</div></blockquote>
<div class="section" id="bulk-reactions">
<h4>Bulk Reactions<a class="headerlink" href="#bulk-reactions" title="Permalink to this headline">¶</a></h4>
<blockquote>
<div><p>EPANET models reactions occurring in the bulk flow with n-th order
kinetics, where the instantaneous rate of reaction (R in
mass/volume/time) is assumed to be concentration-dependent according
to</p>
<div class="math notranslate nohighlight">
\[R = K_b ~ C^n\]</div>
<p>Here <em>Kb</em> = a bulk reaction rate coefficient, <em>C</em> = reactant
concentration (mass/volume), and <em>n</em> = a reaction order. <em>Kb</em> has
units of concentration raised to the (1-<em>n</em>) power divided by time.
It is positive for growth reactions and negative for decay reactions.</p>
<p>EPANET can also consider reactions where a limiting concentration
exists on the ultimate growth or loss of the substance. In this case
the rate expression becomes</p>
<div class="math notranslate nohighlight">
\[R = K_b (C_L − C) \times C^{(n−1)}\]</div>
<div class="math notranslate nohighlight">
\[R = K_b (C − C_L ) \times C^{(n−1)}\]</div>
<p>for <em>n</em> &gt; 0, <em>K</em><sub>b</sub> &gt; 0 for <em>n</em> &gt; 0, <em>K</em><sub>b</sub> &lt; 0</p>
<p>where <em>C</em><sub>L</sub> = the limiting concentration. Thus there are three
parameters (<em>K</em><sub>b</sub>, <em>C</em><sub>L</sub>, and <em>n</em>) that are used to characterize
bulk reaction rates. Some special cases of well-known kinetic models
include the following (See Appendix D for more examples):</p>
<blockquote>
<div><table border="1" class="docutils">
<colgroup>
<col width="33%" />
<col width="33%" />
<col width="33%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head"><em>Model</em></th>
<th class="head"><em>Parameters</em></th>
<th class="head"><em>Examples</em></th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td>First-Order Decay</td>
<td><em>C</em><sub>L</sub> = 0,
<em>K</em><sub>b</sub> &lt; 0,
<em>n</em> = 1</td>
<td>Chlorine</td>
</tr>
<tr class="row-odd"><td>First-Order
Saturation Growth</td>
<td><em>C</em><sub>L</sub> &gt; 0,
<em>K</em><sub>b</sub> &gt; 0,
<em>n</em> = 1</td>
<td>Trihalomethanes</td>
</tr>
<tr class="row-even"><td>Zero-Order Kinetics</td>
<td><em>C</em><sub>L</sub> = 0,
<em>K</em><sub>b</sub> &lt;&gt; 0,
<em>n</em> = 0</td>
<td>Water Age</td>
</tr>
<tr class="row-odd"><td>No Reaction</td>
<td><em>C</em><sub>L</sub> = 0,
<em>K</em><sub>b</sub> = 0</td>
<td>Fluoride Tracer</td>
</tr>
</tbody>
</table>
</div></blockquote>
<p>The <em>K</em><sub>b</sub> for first-order reactions can be estimated by placing a
sample of water in a series of non-reacting glass bottles and
analyzing the contents of each bottle at different points in time. If
the reaction is first-order, then plotting the natural log
(<em>C</em><sub>t</sub> / <em>C</em><sub>o</sub>) against time should result in a straight line, where
<em>C</em><sub>t</sub> is concentration at time t and <em>C</em><sub>o</sub> is concentration at time
zero. <em>K</em><sub>b</sub> would then be estimated as the slope of this line.</p>
<p>Bulk reaction coefficients usually increase with increasing
temperature. Running multiple bottle tests at different temperatures
will provide more accurate assessment of how the rate coefficient
varies with temperature</p>
</div></blockquote>
</div>
<div class="section" id="wall-reactions">
<h4>Wall Reactions<a class="headerlink" href="#wall-reactions" title="Permalink to this headline">¶</a></h4>
<blockquote>
<div><p>The rate of water quality reactions occurring at or near the pipe
wall can be considered to be dependent on the concentration in the
bulk flow by using an expression of the form</p>
<div class="math notranslate nohighlight">
\[R = ( A /V ) K_w ~ C^n\]</div>
<p>where <em>K</em><sub>w</sub> = a wall reaction rate coefficient and <em>(A/V)</em> = the
surface area per unit volume within a pipe (equal to 4 divided by the
pipe diameter). The latter term converts the mass reacting per unit
of wall area to a per unit volume basis. EPANET limits the choice of
wall reaction order to either 0 or 1, so that the units of <em>Kw</em> are
either mass/area/time or length/time, respectively. As with <em>K</em><sub>b</sub>,
<em>K</em><sub>w</sub> must be supplied to the program by the modeler. First-order
<em>K</em><sub>w</sub> values can range anywhere from 0 to as much as 5 ft/day.</p>
<p><em>K</em><sub>w</sub> should be adjusted to account for any mass transfer
limitations in moving reactants and products between the bulk flow
and the wall. EPANET does this automatically, basing the adjustment
on the molecular diffusivity of the substance being modeled and on
the flow’s Reynolds number. See Appendix D for details. (Setting the
molecular diffusivity to zero will cause mass transfer effects to be
ignored.)</p>
<p>The wall reaction coefficient can depend on temperature and can also
be correlated to pipe age and material. It is well known that as
metal pipes age their roughness tends to increase due to encrustation
and tuburculation of corrosion products on the pipe walls. This
increase in roughness produces a lower Hazen-Williams C-factor or a
higher Darcy-Weisbach roughness coefficient, resulting in greater
frictional head loss in flow through the pipe.</p>
<p>There is some evidence to suggest that the same processes that
increase a pipe’s roughness with age also tend to increase the
reactivity of its wall with some chemical species, particularly
chlorine and other disinfectants. EPANET can make each pipe’s <em>Kw</em>
be a function of the coefficient used to describe its roughness. A
different function applies depending on the formula used to compute
headloss through the pipe:</p>
<p><em>Headloss Formula     Wall Reaction Formula</em></p>
<p>Hazen-Williams   <em>K</em><sub>w</sub> = <em>F / C</em></p>
<p>Darcy-Weisbach   <em>K</em><sub>w</sub> = <em>-F / log(e/d)</em></p>
<p>Chezy-Manning   <em>K</em><sub>w</sub> = <em>F n</em></p>
<p>where <em>C</em> = Hazen-Williams C-factor, <em>e</em> = Darcy-Weisbach roughness,
<em>d</em> = pipe diameter, <em>n</em> = Manning roughness coefficient, and <em>F</em> =
wall reaction - pipe roughness coefficient The coefficient F must be
developed from site-specific field measurements and will have a
different meaning depending on which head loss equation is used. The
advantage of using this approach is that it requires only a single
parameter, <em>F</em>, to allow wall reaction coefficients to vary
throughout the network in a physically meaningful way.</p>
</div></blockquote>
</div>
</div>
<div class="section" id="water-age-and-source-tracing">
<h3>Water Age and Source Tracing<a class="headerlink" href="#water-age-and-source-tracing" title="Permalink to this headline">¶</a></h3>
<blockquote>
<div><p>In addition to chemical transport, EPANET can also model the changes
in the age of water throughout a distribution system. Water age is
the time spent by a parcel of water in the network. New water
entering the network from reservoirs or source nodes enters with age
of zero. Water age provides a simple, non-specific measure of the
overall quality of delivered drinking water. Internally, EPANET
treats age as a</p>
<p>reactive constituent whose growth follows zero-order kinetics with a
rate constant equal to 1 (i.e., each second the water becomes a
second older).</p>
<p>EPANET can also perform source tracing. Source tracing tracks over
time what percent of water reaching any node in the network had its
origin at a particular node. The source node can be any node in the
network, including tanks or reservoirs. Internally, EPANET treats
this node as a constant source of a non-reacting constituent that
enters the network with a concentration of 100. Source tracing is a
useful tool for analyzing distribution systems drawing water from two
or more different raw water supplies. It can show to what degree
water from a given source blends with that from other sources, and
how the spatial pattern of this blending changes over time.</p>
</div></blockquote>
</div>
</div>
</div>


           </div>
           
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="4_EPANET_workspace.html" class="btn btn-neutral float-right" title="4. EPANET’S WORKSPACE" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="2_quickstart.html" class="btn btn-neutral" title="2. QUICK START TUTORIAL" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright .

    </p>
  </div>
  Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a <a href="https://github.com/rtfd/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  


  

    <script type="text/javascript">
        var DOCUMENTATION_OPTIONS = {
            URL_ROOT:'./',
            VERSION:'2.00.12',
            LANGUAGE:'None',
            COLLAPSE_INDEX:false,
            FILE_SUFFIX:'.html',
            HAS_SOURCE:  true,
            SOURCELINK_SUFFIX: '.txt'
        };
    </script>
      <script type="text/javascript" src="_static/jquery.js"></script>
      <script type="text/javascript" src="_static/underscore.js"></script>
      <script type="text/javascript" src="_static/doctools.js"></script>
      <script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.1/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>

  

  <script type="text/javascript" src="_static/js/theme.js"></script>

  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>